(this.webpackJsonpnoted=this.webpackJsonpnoted||[]).push([[0],{100:function(e,t,n){e.exports=n.p+"static/media/sp-tune.a3eeb710.mp3"},113:function(e,t,n){e.exports=n.p+"static/media/cross.21df9a01.svg"},114:function(e,t,n){e.exports=n.p+"static/media/arrow.15b12873.svg"},115:function(e,t,n){e.exports=n.p+"static/media/loading.ecf90307.svg"},116:function(e,t,n){e.exports=n.p+"static/media/upload.926d5c39.svg"},117:function(e,t,n){e.exports=n.p+"static/media/save.d5a09bc5.svg"},118:function(e,t,n){e.exports=n.p+"static/media/friends.e8f88cde.svg"},119:function(e,t,n){e.exports=n.p+"static/media/ok.251fc800.svg"},125:function(e,t,n){e.exports=n.p+"static/media/petek-logo.e7a6391d.png"},129:function(e,t,n){e.exports=n(229)},138:function(e,t,n){},143:function(e,t,n){},172:function(e,t){},229:function(e,t,n){"use strict";n.r(t);var a,r=n(1),c=n.n(r),o=n(22),i=n.n(o),s=n(11),u=(n(138),n(139),n(140),n(141),n(3)),l=n.n(u),m=n(5),p=(n(143),n(15)),d=n(10),f=n(100),h=n.n(f),v=n(101),g=n.n(v),E={setup:function(){a=g()("/")},terminate:function(){a=null},on:function(e,t){a.on(e,t)},off:function(e,t){a.off(e,t)},emit:function(e,t){a.emit(e,t)}};var b={save:function(e,t){console.log("$$$SAVE INVOKED$$$$",t);var n=JSON.stringify(t);localStorage.setItem(e,n)},load:function(e){console.log("$$$LOAD INVOKED$$$$");var t=localStorage.getItem(e);return JSON.parse(t)}},O=n(23),w=n(38),y=n.n(w),N=y.a.create({withCredentials:!0}),j=function(e,t){return U(e,"GET",t)},k=function(e,t){return U(e,"POST",t)},x=function(e,t){return console.log("http service data:",t),U(e,"PUT",t)},C=function(e,t){return U(e,"DELETE",t)};function U(e){return S.apply(this,arguments)}function S(){return(S=Object(m.a)(l.a.mark((function e(t){var n,a,r,c=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:"get",a=c.length>2&&void 0!==c[2]?c[2]:null,e.prev=2,console.log("httpservice data:",a),e.next=6,N({method:n,url:"".concat("/api/").concat(t),data:a});case 6:return r=e.sent,e.abrupt("return",r.data);case 10:if(e.prev=10,e.t0=e.catch(2),401!==e.t0.response.status){e.next=14;break}return e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,null,[[2,10]])})))).apply(this,arguments)}var _=n(48),I=n.n(_),R=n(7),T={makeId:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12,t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=0;a<e;a++)t+=n.charAt(Math.floor(Math.random()*n.length));return t},getRandomChuck:function(){return D.apply(this,arguments)}};function D(){return(D=Object(m.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.get("https://api.chucknorris.io/jokes/random");case 2:return t=e.sent,e.abrupt("return",t.data.value);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var z={uploadImg:function(e){var t="https://api.cloudinary.com/v1_1/".concat("tamir","/image/upload"),n=new FormData;return e.target?n.append("file",e.target.files[0]):n.append("file",e),n.append("upload_preset","u1inrfbp"),fetch(t,{method:"POST",body:n,secure:!0}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){return console.error(e)}))}};function A(){return(A=Object(m.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._id?x("room/".concat(t._id),t):k("room",t),e.next=3,n;case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var M={query:function(e){var t=new URLSearchParams(e);return j("room?".concat(t))},getById:function(e){var t=new URLSearchParams;if(e){for(var n in e)e[n]&&t.set(n,e[n]);return j("room?".concat(t))}},save:function(e){return A.apply(this,arguments)},remove:function(e){return C("room/".concat(e))}};function L(e){return console.log("filterBy in actions",e),function(){var t=Object(m.a)(l.a.mark((function t(n){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,M.getById(e);case 3:a=t.sent,n({type:"SET_CURR_ROOM",room:a}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("ERROR",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}function B(e){return console.log(e.notes),function(){var t=Object(m.a)(l.a.mark((function t(n){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=!!e._id,t.next=3,M.save(e);case 3:return e=t.sent,n(a?{type:"SET_CURR_ROOM",room:e}:{type:"ADD_ROOM",room:e}),t.abrupt("return",e);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}var P=n(30),H=n(105),F=n.n(H),V=n(106),$=n.n(V),W=n(107),K=n.n(W),J=n(108),q=n.n(J),G=n(109),X=n.n(G),Y=n(110),Q=n.n(Y),Z=n(111),ee=n.n(Z),te=function(e){var t=e.setNoteType,n=e.setNoteInputType,a=e.setNoteData,o=Object(r.useState)(!1),i=Object(R.a)(o,2),s=i[0],u=i[1];return c.a.createElement(P.b,{slideSpeed:500,direction:"up",spacing:8,isOpen:s,className:"button-menu"},c.a.createElement(P.c,{iconResting:c.a.createElement(F.a,{style:{fontSize:20},nativecolor:"white"}),iconActive:c.a.createElement($.a,{style:{fontSize:20},nativecolor:"white"}),backgroundColor:"black",onClick:function(){return u(!s)},size:56}),c.a.createElement(P.a,{icon:c.a.createElement(K.a,{style:{fontSize:20,fill:"#51a255"},nativecolor:"black"}),backgroundColor:"white",size:40,className:!s&&"hidden",onClick:function(){t("NoteText"),u(!s),n("InputText")}}),c.a.createElement(P.a,{icon:c.a.createElement(q.a,{style:{fontSize:20,fill:"#28b5f2"},nativecolor:"black"}),backgroundColor:"white",size:40,className:!s&&"hidden",onClick:function(){t("NoteImg"),u(!s),n("InputImg")}}),c.a.createElement(P.a,{icon:c.a.createElement(X.a,{style:{fontSize:20,fill:"#ff0000"},nativecolor:"black"}),backgroundColor:"white",size:40,className:!s&&"hidden",onClick:function(){t("NoteVideo"),u(!s),n("InputVideo")}}),c.a.createElement(P.a,{icon:c.a.createElement(Q.a,{style:{fontSize:20,fill:"#ffa350"},nativecolor:"black"}),backgroundColor:"white",size:40,className:!s&&"hidden",onClick:function(){t("NoteTodo"),u(!s),n("InputTodo"),a([])}}),c.a.createElement(P.a,{icon:c.a.createElement(ee.a,{style:{fontSize:20,fill:"#800080"},nativecolor:"black"}),backgroundColor:"white",size:40,className:!s&&"hidden",onClick:function(){t("NoteLoc"),u(!s),n("InputLoc"),a([])}}))},ne=n(50),ae=n.n(ne),re=function(e){var t=e.note;return c.a.createElement("div",{className:"note-text"},t.header&&c.a.createElement("h4",null,t.header),c.a.createElement("p",null,t.data))},ce=function(e){var t=e.note;return c.a.createElement("div",{className:"note-img"},t.header&&c.a.createElement("h4",null,t.header),c.a.createElement("img",{src:t.data,alt:t.data}))},oe=function(e){var t=e.note;return c.a.createElement("div",{className:"note-video"},t.header&&c.a.createElement("h4",null,t.header),c.a.createElement("iframe",{width:"100%",allow:"fullscreen",src:"https://www.youtube.com/embed/"+t.data,title:"Video Player"}))},ie=n(112),se=n(39),ue=n.n(se),le=n(113),me=n.n(le),pe=n(114),de=n.n(pe),fe={saveRoom:B},he=Object(s.b)((function(e){return{room:e.room.currRoom}}),fe)((function(e){var t=e.note,n=e.saveRoom,a=e.room,o=e.userId,i=e.isEdit,s=e.currTodoIdx,u=e.setCurrTodoIdx,p=e.setIsNewTodo,d=e.isNewTodo,f=Object(r.useState)(""),h=Object(R.a)(f,2),v=h[0],g=h[1],b=Object(r.useState)(""),O=Object(R.a)(b,2),w=O[0],y=O[1],N=Object(r.useState)(0),j=Object(R.a)(N,2),k=j[0],x=j[1],C=Object(r.createRef)(),U=Object(r.createRef)(),S=function(){var e=Object(m.a)(l.a.mark((function e(r){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i){e.next=2;break}return e.abrupt("return");case 2:return t.data[r].isDone=!t.data[r].isDone,e.next=5,n(a);case 5:E.emit("roomUpdated",{room:a,userId:o});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){!function(){var e=t.data.reduce((function(e,t){return t.isDone&&e++,e}),0),n=parseInt(e/t.data.length*100);x(n)}()})),Object(r.useEffect)((function(){C.current&&C.current.focus(),""!==s&&C.current&&(t.data[s].text=v)}),[v,s]),c.a.createElement("div",{className:"note-todo"},c.a.createElement("div",{className:"todo-header"},t.header&&c.a.createElement("h4",null,t.header),i&&c.a.createElement("img",{src:ue.a,className:"new-todo-btn",onClick:function(){p(!0)}})),c.a.createElement("ul",null,!!t.data.length&&t.data.map((function(e,n){return c.a.createElement("li",{key:e.text,onClick:function(){i&&(u(n),g(e.text))}},c.a.createElement("div",null,c.a.createElement("input",{type:"checkbox",onClick:function(e){return S(n)},checked:e.isDone,readOnly:!0}),s!==n&&c.a.createElement("span",{className:e.isDone?"done":""},e.text)),i&&s===n&&c.a.createElement("input",{type:"text",value:v,ref:C,onChange:function(e){g(e.target.value)}}),i&&c.a.createElement("img",{src:me.a,className:"remove-todo-btn",onClick:function(){return function(e){t.data.splice(e,1)}(n)}}))}))),c.a.createElement("div",{className:"progress-bar"},c.a.createElement(ie.a,{completed:k,labelSize:k?12:0})),d&&c.a.createElement("div",null,c.a.createElement("input",{type:"text",placeholder:"New Todo",ref:U,onChange:function(e){return y(e.target.value)}}),c.a.createElement("img",{src:de.a,className:"add-todo-btn",onClick:function(){return function(){var e={text:w,isDone:!1};t.data.push(e),p(!1),y(""),U.current.value=""}()}})))})),ve=function(e){var t=e.note;return c.a.createElement("div",{className:"note-loc"},t.header&&c.a.createElement("h4",null,t.header),c.a.createElement("p",null,"IM NOTE LOC YOU FUCKER"))},ge=function(e){var t=e.isPinned;return c.a.createElement("svg",{className:t?"star-icon pinned":"star-icon",viewBox:"0 -10 511.98685 511",xmlns:"http://www.w3.org/2000/svg"},c.a.createElement("path",{d:"m510.652344 185.902344c-3.351563-10.367188-12.546875-17.730469-23.425782-18.710938l-147.773437-13.417968-58.433594-136.769532c-4.308593-10.023437-14.121093-16.511718-25.023437-16.511718s-20.714844 6.488281-25.023438 16.535156l-58.433594 136.746094-147.796874 13.417968c-10.859376 1.003906-20.03125 8.34375-23.402344 18.710938-3.371094 10.367187-.257813 21.738281 7.957031 28.90625l111.699219 97.960937-32.9375 145.089844c-2.410156 10.667969 1.730468 21.695313 10.582031 28.09375 4.757813 3.4375 10.324219 5.1875 15.9375 5.1875 4.839844 0 9.640625-1.304687 13.949219-3.882813l127.46875-76.183593 127.421875 76.183593c9.324219 5.609376 21.078125 5.097657 29.910156-1.304687 8.855469-6.417969 12.992187-17.449219 10.582031-28.09375l-32.9375-145.089844 111.699219-97.941406c8.214844-7.1875 11.351563-18.539063 7.980469-28.925781zm0 0"}))},Ee=function(e){var t=e.fill;return c.a.createElement("svg",{className:"circle-icon",style:{fill:t},version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 512 512",xmlSpace:"preserve"},c.a.createElement("g",null,c.a.createElement("g",null,c.a.createElement("path",{d:"M256,0C115.39,0,0,115.39,0,256s115.39,256,256,256s256-115.39,256-256S396.61,0,256,0z"}))),c.a.createElement("g",null),c.a.createElement("g",null),c.a.createElement("g",null),c.a.createElement("g",null),c.a.createElement("g",null),c.a.createElement("g",null),c.a.createElement("g",null),c.a.createElement("g",null),c.a.createElement("g",null),c.a.createElement("g",null),c.a.createElement("g",null),c.a.createElement("g",null),c.a.createElement("g",null),c.a.createElement("g",null),c.a.createElement("g",null))},be=function(e){return c.a.createElement("svg",{className:"color-pallete-icon","enable-background":"new 0 0 512.037 512.037",viewBox:"0 0 512.037 512.037",xmlns:"http://www.w3.org/2000/svg"},c.a.createElement("g",null,c.a.createElement("g",{"clip-rule":"evenodd","fill-rule":"evenodd"},c.a.createElement("path",{d:"m237.033 233.985 41.012 41.013 64.978-69.184 153.518-163.455c7.154-7.617 7.389-19.481 0-26.87s-19.253-7.154-26.87 0l-163.455 153.519z",fill:"#6d91ac"}),c.a.createElement("path",{d:"m278.045 274.998-41.012-41.013c-68.762 18.425-23.075 64.087-57.278 98.291 28.514 16.463 98.291-4.426 98.29-57.278z",fill:"#f4e9e2"}),c.a.createElement("path",{d:"m179.754 332.276c34.203-34.203-11.484-79.866 57.278-98.291l69.183-64.977c-7.007-13.059-10.558-27.482-10.655-41.924-.175-26.127 24.949-56.528-41.774-63.75-63.943-6.921-130.337 14.12-179.356 63.14-85.915 85.916-85.915 225.211 0 311.127 85.916 85.916 225.211 85.916 311.127 0 49.019-49.019 70.061-115.413 63.14-179.356-7.222-66.723-37.623-41.6-63.75-41.774-14.442-.097-28.866-3.648-41.925-10.655l-64.978 69.184c.002 52.85-69.775 73.739-98.29 57.276zm5.074-164.71c-15.307 6.34-32.857-.929-39.197-16.236s.929-32.856 16.236-39.197 32.857.929 39.198 16.236c6.339 15.307-.93 32.856-16.237 39.197zm-66.154 66.13c-6.34 15.307-23.89 22.576-39.197 16.236-15.307-6.341-22.576-23.89-16.236-39.197s23.89-22.577 39.197-16.236 22.576 23.89 16.236 39.197zm-.017 93.538c6.34 15.307-.929 32.857-16.236 39.197s-32.856-.929-39.197-16.236c-6.34-15.307.929-32.857 16.236-39.197s32.857.929 39.197 16.236zm159.669 66.171c15.307-6.34 32.857.929 39.198 16.236 6.34 15.307-.929 32.856-16.236 39.197s-32.857-.929-39.197-16.236c-6.341-15.307.928-32.857 16.235-39.197zm-93.539-.016c15.307 6.34 22.576 23.89 16.236 39.197-6.341 15.307-23.89 22.576-39.197 16.236-15.308-6.341-22.577-23.89-16.236-39.197 6.341-15.308 23.89-22.577 39.197-16.236zm159.693-66.114c6.34-15.307 23.89-22.577 39.197-16.236 15.307 6.34 22.576 23.889 16.236 39.197-6.341 15.307-23.89 22.577-39.197 16.236-15.308-6.341-22.577-23.89-16.236-39.197z",fill:"#ddb9a3"}),c.a.createElement("path",{d:"m145.63 151.33c6.341 15.307 23.89 22.576 39.197 16.236 15.307-6.341 22.576-23.89 16.236-39.197s-23.89-22.577-39.198-16.236c-15.306 6.34-22.575 23.89-16.235 39.197z",fill:"#000"}),c.a.createElement("path",{d:"m118.674 233.696c6.34-15.307-.929-32.856-16.236-39.197s-32.857.929-39.197 16.236c-6.341 15.307.929 32.856 16.236 39.197 15.307 6.34 32.856-.929 39.197-16.236z",fill:"#ffa350"}),c.a.createElement("path",{d:"m118.657 327.234c-6.341-15.307-23.89-22.577-39.197-16.236s-22.577 23.89-16.236 39.197 23.89 22.576 39.197 16.236 22.576-23.889 16.236-39.197z",fill:"#f78888"}),c.a.createElement("path",{d:"m184.787 393.389c-15.307-6.341-32.856.929-39.197 16.236s.929 32.857 16.236 39.197 32.856-.929 39.197-16.236c6.341-15.308-.929-32.857-16.236-39.197z",fill:"#fff59d"}),c.a.createElement("path",{d:"m278.326 393.405c-15.307 6.34-22.576 23.89-16.236 39.197 6.341 15.307 23.89 22.577 39.197 16.236s22.576-23.89 16.236-39.197-23.89-22.576-39.197-16.236z",fill:"#90ccf4"}),c.a.createElement("path",{d:"m344.48 327.275c-6.341 15.307.929 32.856 16.236 39.197s32.857-.929 39.197-16.236-.929-32.856-16.236-39.197-32.857.929-39.197 16.236z",fill:"#4caf50"})),c.a.createElement("g",null,c.a.createElement("path",{d:"m75.633 301.76c-20.377 8.44-30.088 31.886-21.648 52.263 6.375 15.388 21.303 24.693 37.008 24.693 5.091 0 10.267-.979 15.255-3.045 20.377-8.44 30.088-31.885 21.648-52.262-8.441-20.378-31.884-30.09-52.263-21.649zm22.961 55.433c-10.188 4.219-21.911-.635-26.132-10.824-4.22-10.189.636-21.912 10.824-26.132 2.495-1.033 5.081-1.522 7.627-1.522 7.852 0 15.317 4.653 18.504 12.347 4.221 10.188-.634 21.911-10.823 26.131z"}),c.a.createElement("path",{d:"m54.002 237.522c4.089 9.872 11.777 17.56 21.648 21.648 4.99 2.067 10.163 3.045 15.255 3.045 15.704 0 30.634-9.306 37.007-24.693 8.44-20.377-1.271-43.822-21.647-52.262-9.872-4.089-20.744-4.089-30.615 0s-17.559 11.777-21.647 21.648c-4.09 9.871-4.09 20.743-.001 30.614zm18.478-22.96c2.044-4.936 5.888-8.78 10.824-10.824 2.468-1.022 5.061-1.533 7.653-1.533s5.187.511 7.654 1.533c10.188 4.22 15.044 15.942 10.824 26.131-4.221 10.188-15.944 15.045-26.131 10.824-4.936-2.044-8.78-5.888-10.824-10.824-2.045-4.935-2.045-10.371 0-15.307z"}),c.a.createElement("path",{d:"m158.04 176.805c4.936 2.044 10.121 3.066 15.308 3.066 5.185 0 10.372-1.022 15.307-3.066 9.871-4.089 17.559-11.777 21.648-21.648 4.088-9.871 4.088-20.744 0-30.615s-11.776-17.559-21.647-21.648-20.744-4.089-30.615 0c-9.872 4.088-17.56 11.776-21.648 21.648-4.088 9.871-4.088 20.744 0 30.614 4.087 9.871 11.775 17.56 21.647 21.649zm-3.171-44.61c2.044-4.936 5.888-8.779 10.824-10.824 2.468-1.022 5.06-1.533 7.653-1.533s5.186.511 7.654 1.533c4.936 2.044 8.779 5.888 10.824 10.824 2.044 4.936 2.044 10.372 0 15.307-2.044 4.936-5.888 8.78-10.824 10.824-4.936 2.044-10.372 2.044-15.308 0s-8.779-5.889-10.824-10.825c-2.043-4.934-2.043-10.37.001-15.306z"}),c.a.createElement("path",{d:"m157.999 458.06c4.99 2.067 10.163 3.045 15.255 3.045 15.704 0 30.634-9.306 37.007-24.693 4.089-9.871 4.089-20.744 0-30.615s-11.777-17.56-21.648-21.648c-9.872-4.089-20.744-4.089-30.615 0s-17.559 11.777-21.648 21.648c-8.439 20.378 1.272 43.823 21.649 52.263zm-3.17-44.608c2.044-4.936 5.889-8.78 10.824-10.824 2.468-1.022 5.061-1.533 7.653-1.533s5.186.511 7.654 1.533c4.935 2.044 8.779 5.888 10.823 10.824s2.044 10.372 0 15.308c-4.22 10.188-15.941 15.043-26.131 10.824-10.188-4.222-15.043-15.944-10.823-26.132z"}),c.a.createElement("path",{d:"m274.499 458.077c4.936 2.044 10.121 3.066 15.307 3.066s10.372-1.022 15.307-3.067c9.872-4.088 17.56-11.776 21.648-21.648 4.088-9.871 4.088-20.744 0-30.614-4.088-9.871-11.776-17.56-21.648-21.648-9.871-4.089-20.743-4.089-30.614 0-20.377 8.44-30.088 31.885-21.648 52.263 4.089 9.871 11.777 17.559 21.648 21.648zm7.654-55.433c2.468-1.022 5.061-1.533 7.654-1.533s5.186.511 7.654 1.533c4.936 2.044 8.779 5.888 10.824 10.824 2.044 4.936 2.044 10.372 0 15.307-2.044 4.936-5.888 8.779-10.824 10.824s-10.372 2.044-15.307 0c-4.936-2.044-8.78-5.888-10.824-10.824-4.221-10.189.634-21.911 10.823-26.131z"}),c.a.createElement("path",{d:"m372.144 378.756c15.704 0 30.633-9.305 37.007-24.693 4.089-9.871 4.089-20.744 0-30.615-4.089-9.872-11.777-17.56-21.648-21.648-20.377-8.441-43.821 1.271-52.262 21.647-8.44 20.377 1.271 43.822 21.647 52.262 4.99 2.068 10.164 3.047 15.256 3.047zm-18.426-47.654c4.22-10.188 15.943-15.043 26.131-10.824 10.188 4.22 15.044 15.943 10.824 26.131s-15.94 15.044-26.132 10.824c-10.187-4.22-15.042-15.942-10.823-26.131z"}),c.a.createElement("path",{d:"m503.612 8.418c-11.14-11.14-29.056-11.235-40.788-.218l-153.092 143.787c-2.685-8.018-4.114-16.474-4.171-24.97-.032-4.704 1.005-9.935 2.103-15.473 2.426-12.244 5.176-26.121-3.679-38.173-7.985-10.868-23.594-17.216-49.122-19.979-53.057-5.746-106.697 7.146-151.041 36.294-4.615 3.034-5.897 9.234-2.864 13.849s9.235 5.897 13.849 2.864c40.475-26.605 89.448-38.369 137.903-33.124 23.692 2.565 32.195 7.907 35.156 11.938 3.398 4.625 2.334 11.564.178 22.443-1.243 6.273-2.529 12.76-2.484 19.494.091 13.626 3.004 27.178 8.454 39.597l-62.038 58.267c-45.251 13.055-46.243 39.977-47.04 61.685-.537 14.623-1 27.252-12.254 38.506-2.198 2.199-3.249 5.294-2.843 8.376.406 3.083 2.222 5.801 4.915 7.355 7.952 4.591 18.161 6.829 29.188 6.829 15.456 0 32.515-4.398 47.203-12.878 22.479-12.979 35.411-32.679 36.773-55.795l57.365-61.078c12.421 5.451 25.968 8.364 39.597 8.455 6.758.047 13.221-1.241 19.494-2.483 10.881-2.155 17.82-3.219 22.444.178 4.03 2.961 9.373 11.464 11.938 35.156 6.886 63.618-15.082 126.021-60.27 171.208-81.879 81.879-215.105 81.879-296.984 0-70.092-70.09-81.507-180.985-27.142-263.682 3.034-4.615 1.752-10.815-2.863-13.849-4.615-3.035-10.816-1.753-13.849 2.863-28.631 43.552-41.621 96.267-36.578 148.438 5.112 52.886 28.654 102.738 66.29 140.374 43.441 43.441 101.2 67.365 162.635 67.365s119.193-23.924 162.634-67.365c49.492-49.491 73.552-117.833 66.011-187.503-2.763-25.528-9.112-41.136-19.979-49.121-12.052-8.855-25.93-6.105-38.174-3.679-5.538 1.097-10.771 2.144-15.473 2.102-8.498-.057-16.952-1.486-24.97-4.171l143.786-153.094c11.018-11.731 10.923-29.647-.218-40.788zm-262.467 309.149c-15.374 8.876-32.501 11.493-44.984 9.672 7.8-13.57 8.323-27.813 8.763-39.806.725-19.763 1.231-33.205 29.232-42.183l33.719 33.72c-1.761 21.055-17.265 33.132-26.73 38.597zm248.107-282.054-211.432 225.118-26.42-26.42 225.117-211.432c3.809-3.577 9.499-3.673 12.953-.218 3.455 3.455 3.359 9.144-.218 12.952z"}),c.a.createElement("path",{d:"m74.438 136.473c5.523 0 10-4.477 10-10s-4.477-10-10-10h-.007c-5.523 0-9.996 4.477-9.996 10s4.48 10 10.003 10z"}))))},Oe=function(e){var t=e.togglePinned,n=e.note,a=e.user,o=e.setNoteColor,i=Object(r.useState)(!1),s=Object(R.a)(i,2),u=s[0],l=s[1],m=function(e){o(e),l(!1)};return c.a.createElement("div",{className:"features-container"},c.a.createElement("i",{onClick:function(){return t(n)}},c.a.createElement(ge,{isPinned:!!a.pinnedNotes.find((function(e){return e===n._id}))})),c.a.createElement("div",{className:"color-pallete"},c.a.createElement("i",{onClick:function(){return l(!u)}},c.a.createElement(be,null)),u&&c.a.createElement("div",{className:"colors-container"},c.a.createElement("i",{onClick:function(){return m("#ffa350")}},c.a.createElement(Ee,{fill:"#ffa350"})),c.a.createElement("i",{onClick:function(){return m("#f78888")}},c.a.createElement(Ee,{fill:"#f78888"})),c.a.createElement("i",{onClick:function(){return m("#fff59d")}},c.a.createElement(Ee,{fill:"#fff59d"})),c.a.createElement("i",{onClick:function(){return m("#90ccf4")}},c.a.createElement(Ee,{fill:"#90ccf4"})),c.a.createElement("i",{onClick:function(){return m("#4caf50")}},c.a.createElement(Ee,{fill:"#4caf50"})))))},we=function(e){return c.a.createElement("svg",{className:"remove-icon",viewBox:"0 0 512 512",xmlns:"http://www.w3.org/2000/svg"},c.a.createElement("path",{d:"m256 512c-141.160156 0-256-114.839844-256-256s114.839844-256 256-256 256 114.839844 256 256-114.839844 256-256 256zm0-475.429688c-120.992188 0-219.429688 98.4375-219.429688 219.429688s98.4375 219.429688 219.429688 219.429688 219.429688-98.4375 219.429688-219.429688-98.4375-219.429688-219.429688-219.429688zm0 0"}),c.a.createElement("path",{d:"m347.429688 365.714844c-4.679688 0-9.359376-1.785156-12.929688-5.359375l-182.855469-182.855469c-7.144531-7.144531-7.144531-18.714844 0-25.855469 7.140625-7.140625 18.714844-7.144531 25.855469 0l182.855469 182.855469c7.144531 7.144531 7.144531 18.714844 0 25.855469-3.570313 3.574219-8.246094 5.359375-12.925781 5.359375zm0 0"}),c.a.createElement("path",{d:"m164.570312 365.714844c-4.679687 0-9.355468-1.785156-12.925781-5.359375-7.144531-7.140625-7.144531-18.714844 0-25.855469l182.855469-182.855469c7.144531-7.144531 18.714844-7.144531 25.855469 0 7.140625 7.140625 7.144531 18.714844 0 25.855469l-182.855469 182.855469c-3.570312 3.574219-8.25 5.359375-12.929688 5.359375zm0 0"}))},ye=function(e){return c.a.createElement("svg",{className:"edit-icon",version:"1.1",id:"Capa_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 477.873 477.873",xmlSpace:"preserve"},c.a.createElement("g",null,c.a.createElement("g",null,c.a.createElement("path",{d:"M392.533,238.937c-9.426,0-17.067,7.641-17.067,17.067V426.67c0,9.426-7.641,17.067-17.067,17.067H51.2\r c-9.426,0-17.067-7.641-17.067-17.067V85.337c0-9.426,7.641-17.067,17.067-17.067H256c9.426,0,17.067-7.641,17.067-17.067\r S265.426,34.137,256,34.137H51.2C22.923,34.137,0,57.06,0,85.337V426.67c0,28.277,22.923,51.2,51.2,51.2h307.2\r c28.277,0,51.2-22.923,51.2-51.2V256.003C409.6,246.578,401.959,238.937,392.533,238.937z"}))),c.a.createElement("g",null,c.a.createElement("g",null,c.a.createElement("path",{d:"M458.742,19.142c-12.254-12.256-28.875-19.14-46.206-19.138c-17.341-0.05-33.979,6.846-46.199,19.149L141.534,243.937\r c-1.865,1.879-3.272,4.163-4.113,6.673l-34.133,102.4c-2.979,8.943,1.856,18.607,10.799,21.585\r c1.735,0.578,3.552,0.873,5.38,0.875c1.832-0.003,3.653-0.297,5.393-0.87l102.4-34.133c2.515-0.84,4.8-2.254,6.673-4.13\r l224.802-224.802C484.25,86.023,484.253,44.657,458.742,19.142z M434.603,87.419L212.736,309.286l-66.287,22.135l22.067-66.202\r L390.468,43.353c12.202-12.178,31.967-12.158,44.145,0.044c5.817,5.829,9.095,13.72,9.12,21.955\r C443.754,73.631,440.467,81.575,434.603,87.419z"}))),c.a.createElement("g",null),c.a.createElement("g",null),c.a.createElement("g",null),c.a.createElement("g",null),c.a.createElement("g",null),c.a.createElement("g",null),c.a.createElement("g",null),c.a.createElement("g",null),c.a.createElement("g",null),c.a.createElement("g",null),c.a.createElement("g",null),c.a.createElement("g",null),c.a.createElement("g",null),c.a.createElement("g",null),c.a.createElement("g",null))},Ne=function(e){return c.a.createElement("svg",{className:"save-icon",viewBox:"0 0 512 512",xmlns:"http://www.w3.org/2000/svg"},c.a.createElement("g",null,c.a.createElement("path",{d:"m490.647 133.435c-.101-.103-128.128-129.127-128.02-129.019-2.927-2.938-6.813-4.416-10.627-4.416-13.006 0-293.619 0-305 0-16.542 0-30 13.458-30 30v452c0 16.542 13.458 30 30 30h418c16.542 0 30-13.458 30-30v-338c0-3.958-1.564-7.755-4.353-10.565zm-217.647-103.435v66c0 8.284 6.716 15 15 15s15-6.716 15-15v-66h34v115h-162v-115zm192 452h-418v-452h98v130c0 8.284 6.716 15 15 15h192c8.284 0 15-6.716 15-15v-108.587l98 98.766z"}),c.a.createElement("path",{d:"m96 241c-8.284 0-15 6.716-15 15v176c0 8.284 6.716 15 15 15h320c8.284 0 15-6.716 15-15v-176c0-8.284-6.716-15-15-15zm305 176h-290v-146h290z"}),c.a.createElement("path",{d:"m160 335h48c8.284 0 15-6.716 15-15s-6.716-15-15-15h-48c-8.284 0-15 6.716-15 15s6.716 15 15 15z"})))},je=function(e){var t=e.note,n=e.user,a=e.removeNote,o=e.saveRoomChanges,i=e.togglePinned,s=Object(r.useState)(!1),u=Object(R.a)(s,2),l=u[0],m=u[1],p=Object(r.useState)(!1),d=Object(R.a)(p,2),f=d[0],h=d[1],v=Object(r.useState)(""),g=Object(R.a)(v,2),E=g[0],b=g[1],O={NoteText:re,NoteImg:ce,NoteVideo:oe,NoteTodo:he,NoteLoc:ve}[t.type],w=Object(r.createRef)(),y=function(){t.bgColor&&(w.current.style.backgroundColor=t.bgColor)};return Object(r.useEffect)((function(){y(),t.createdBy._id===n._id&&t.createdBy.imgUrl!==n.imgUrl&&(t.createdBy.imgUrl=n.imgUrl,o())}),[]),Object(r.useEffect)((function(){y()}),[t.bgColor]),c.a.createElement("div",{className:"note-preview"},c.a.createElement("div",{className:n._id===t.createdBy._id?"user-container":"friend-container"},c.a.createElement("img",{src:t.createdBy.imgUrl,alt:"Note creator avatar",className:"avatar avatar-s"}),c.a.createElement("div",{className:"note-container",ref:w},c.a.createElement("div",{className:"note-header"},c.a.createElement("div",null,("NoteTodo"===t.type||"NoteText"===t.type)&&!l&&c.a.createElement("i",{onClick:function(){return m(!0)}},c.a.createElement(ye,null)),("NoteTodo"===t.type||"NoteText"===t.type)&&l&&c.a.createElement("i",{onClick:function(){m(!1),o(),b("")}},c.a.createElement(Ne,null)),c.a.createElement("i",{onClick:function(){return a(t._id)}},c.a.createElement(we,null))),c.a.createElement(ae.a,{format:"MM/DD/YY ,HH:mm"},t.createdAt)),c.a.createElement(O,{note:t,user:n,isEdit:l,currTodoIdx:E,setCurrTodoIdx:b,setIsNewTodo:h,isNewTodo:f}),c.a.createElement(Oe,{togglePinned:i,note:t,user:n,setNoteColor:function(e){t.bgColor=e,o()}}))))},ke=n(115),xe=n.n(ke),Ce=function(){return c.a.createElement("div",null,c.a.createElement("img",{src:xe.a,alt:"loading",className:"loading"}))},Ue=function(e){var t=e.notes,n=e.user,a=e.removeNote,o=e.saveRoomChanges,i=e.togglePinned,s=e.setNoteType,u=Object(r.useState)([]),l=Object(R.a)(u,2),m=l[0],p=l[1];return Object(r.useEffect)((function(){var e=[];t.map((function(t){n.pinnedNotes.find((function(e){return e===t._id}))?e.unshift(t):e.push(t)})),p(e)}),[t]),c.a.createElement("div",{className:"note-list",onClick:function(){return s("")}},m.length?m.map((function(e){return c.a.createElement(je,{note:e,key:e._id,user:n,removeNote:a,saveRoomChanges:o,togglePinned:i})})):c.a.createElement(Ce,null))},Se=n(6),_e=n(18),Ie=n(19),Re=n(21),Te=n(20),De=n(51),ze=function(e){Object(Re.a)(n,e);var t=Object(Te.a)(n);function n(e){var a;return Object(_e.a)(this,n),(a=t.call(this,e)).state={term:""},a.onChangeHandler=function(e){var t=e.target,n=t.value,r=t.name;a.setState(Object(O.a)({},r,n),(function(){a.props.onFilter(Object(Se.a)({},a.state))}))},a.onKeyHandler=function(e){13===e.keyCode&&(e.preventDefault(),a.props.moveToContact())},a.state=Object(Se.a)({},e.filterBy),a}return Object(Ie.a)(n,[{key:"render",value:function(){var e=this.props.placeHolder;return c.a.createElement("form",null,c.a.createElement(De.DebounceInput,{minLength:0,className:"filter-input",debounceTimeout:300,type:"text",placeholder:e||"Search Contacts",onChange:this.onChangeHandler,name:"term",value:this.state.term,onKeyDown:this.onKeyHandler}))}}]),n}(r.Component),Ae=function(e){var t=e.setNoteData,n=e.setNoteHeader,a=e.handleSubmit;return c.a.createElement("form",{className:"input-text",onSubmit:a},c.a.createElement("input",{className:"input-header",placeholder:"Note Header",type:"text",onChange:function(e){return n(e.target.value)}}),c.a.createElement("input",{className:"input-data",placeholder:"Say Something",type:"text",onChange:function(e){return t(e.target.value)}}),c.a.createElement("button",{hidden:!0},"Save"))},Me=n(116),Le=n.n(Me),Be=function(e){var t=e.setNoteHeader,n=e.onUploadImg,a=Object(r.createRef)();return c.a.createElement("section",{className:"input-img"},c.a.createElement("input",{className:"input-header",placeholder:"Img Header",type:"text",onChange:function(e){return t(e.target.value)}}),c.a.createElement("input",{type:"file",onChange:function(e){n(e)},ref:a,hidden:!0}),c.a.createElement("img",{src:Le.a,className:"add-button",alt:"Plus Icon",onClick:function(){a.current.click()}}))},Pe="AIzaSyDD1nIJuc1thshvoaRykKhVDjI8-kbDSFM",He={youtubeQuery:function(e){return Fe.apply(this,arguments)}};function Fe(){return(Fe=Object(m.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.a.get("https://www.googleapis.com/youtube/v3/search?part=snippet&videoEmbeddable=true&type=video&key=".concat(Pe,"&q=").concat(t,"&maxResults=").concat(15));case 3:return n=e.sent,e.abrupt("return",n.data.items);case 7:e.prev=7,e.t0=e.catch(0),console.log("Error while fetching videos",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}var Ve=function(e){var t=e.addVideo,n=e.setNoteHeader,a=Object(r.useState)([]),o=Object(R.a)(a,2),i=o[0],s=o[1],u=function(){var e=Object(m.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=3;break}return s([]),e.abrupt("return");case 3:return e.next=5,He.youtubeQuery(t);case 5:n=e.sent,s(n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return c.a.createElement("section",{className:"input-video"},c.a.createElement("input",{className:"input-header",placeholder:"Note Header",type:"text",onChange:function(e){return n(e.target.value)}}),c.a.createElement(De.DebounceInput,{className:"search-input",minLength:0,debounceTimeout:500,type:"text",placeholder:"Search Video",onChange:function(e){return u(e.target.value)}}),!!i.length&&c.a.createElement("h1",null,"Add video!"),!!i.length&&i.map((function(e){return c.a.createElement("div",{className:"video-card",key:e.id.videoId},c.a.createElement("img",{src:e.snippet.thumbnails.default.url,alt:"Video Thumbnail"}),c.a.createElement("h6",null,e.snippet.title),c.a.createElement("img",{src:ue.a,className:"add-button",alt:"Plus Icon",onClick:function(){t(e.id.videoId),s([])}}))})))},$e=n(41),We=n(52),Ke=n.n(We),Je=n(117),qe=n.n(Je),Ge=function(e){var t=e.setNoteHeader,n=e.setNoteData,a=e.handleSubmit,o=e.noteData,i=Object(r.useState)(""),s=Object(R.a)(i,2),u=s[0],l=s[1],m=c.a.useRef();return c.a.createElement("div",{className:"input-todo"},c.a.createElement("input",{type:"text",placeholder:"Header?",className:"input-header",onChange:function(e){return t(e.target.value)}}),c.a.createElement("ul",null,!o.length&&c.a.createElement("h5",null,"No Todo's Added"),!!o.length&&o.map((function(e,t){return c.a.createElement("li",{className:"todo",key:e.text},c.a.createElement("span",null,e.text),c.a.createElement("img",{src:Ke.a,onClick:function(){return e=t,void n(o.filter((function(t,n){return e!==n})));var e},className:"x-mark",alt:"Remove Todo"}))}))),c.a.createElement("div",{className:"add-todo-container"},c.a.createElement("input",{type:"text",placeholder:"task?",className:"input-task",ref:m,onChange:function(e){return l(e.target.value)}}),c.a.createElement("img",{src:ue.a,className:"add-button",onClick:function(){return n([].concat(Object($e.a)(o),[{text:u,isDone:!1}])),l(""),void(m.current.value="")},alt:"Add todo"})),c.a.createElement("img",{src:qe.a,className:"add-button",onClick:a,alt:"Save"}))},Xe=function(e){e.setNoteData;var t=e.setNoteHeader,n=e.handleSubmit;return c.a.createElement("form",{className:"input-loc",onSubmit:n},c.a.createElement("input",{className:"input-header",placeholder:"Note Header",type:"text",onChange:function(e){return t(e.target.value)}}),c.a.createElement("button",{hidden:!0},"Save"))},Ye={loadRoomById:L,saveRoom:B,resetCurrRoom:function(){return console.log("made it"),function(){var e=Object(m.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{null,t({type:"SET_CURR_ROOM",room:null})}catch(n){console.log("ERROR:",n)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},updateUser:lt},Qe=Object(s.b)((function(e){return{room:e.room.currRoom,user:e.user.loggedinUser}}),Ye)((function(e){var t=Object(r.useState)(""),n=Object(R.a)(t,2),a=n[0],o=n[1],i=Object(r.useState)(""),s=Object(R.a)(i,2),u=s[0],p=s[1],d=Object(r.useState)(""),f=Object(R.a)(d,2),h=f[0],v=f[1],g=Object(r.useState)("InputText"),b=Object(R.a)(g,2),O=b[0],w=b[1],y=Object(r.useState)(!1),N=Object(R.a)(y,2),j=N[0],k=N[1],x=Object(r.useState)(""),C=Object(R.a)(x,2),U=C[0],S=C[1],_={header:u,data:h,type:a},I={InputText:Ae,InputImg:Be,InputVideo:Ve,InputTodo:Ge,InputLoc:Xe}[O],D=function(){var t=Object(m.a)(l.a.mark((function t(){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.match.params.id,t.next=3,e.loadRoomById({term:U.term,roomId:n});case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),A=function(){var t=Object(m.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("**Props.room**",e.room),console.log("**props.user._id**",e.user._id),t.next=4,e.saveRoom(e.room);case 4:E.emit("roomUpdated",{room:e.room,userId:e.user._id});case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),M=function(){var e=Object(m.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("NoteImg"!==a){e.next=6;break}return e.next=3,z.uploadImg(t);case 3:n=e.sent,v(n.secure_url),k(!0);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(){var t=Object(m.a)(l.a.mark((function t(n){var a,r,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=e.user,n&&n.preventDefault(),_._id=T.makeId(24),_.createdAt=Date.now(),r=it.getMinimalUser(a._id,a.imgUrl),_.createdBy=r,c=a.friends.find((function(t){return t.roomId===e.match.params.id})),e.room.notes.unshift(_),e.saveRoom(e.room),E.emit("added note",{room:e.room,user:e.user,friendId:c._id}),p(""),v(""),o(""),k(!1);case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),B=function(){var t=Object(m.a)(l.a.mark((function t(n){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.room.notes.findIndex((function(e){return e._id===n})),e.room.notes.splice(a,1),t.next=4,e.saveRoom(e.room);case 4:E.emit("roomUpdated",{room:e.room,userId:e.user._id});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();if(Object(r.useEffect)((function(){return D(),function(){e.resetCurrRoom()}}),[]),Object(r.useEffect)((function(){(h&&"NoteImg"===a||"NoteVideo"===a)&&L()}),[j]),Object(r.useEffect)((function(){D()}),[U]),e.room)var P=e.room.notes;return c.a.createElement("div",{className:"board-page"},P?c.a.createElement("div",{className:"note-add"},c.a.createElement(ze,{filterBy:U,onFilter:function(e){S(e)},placeHolder:"Search for notes"}),a&&c.a.createElement(I,{isMarkerShown:!0,addVideo:function(e){v(e),k(!0)},onUploadImg:M,handleSubmit:L,setNoteHeader:p,setNoteData:v,noteData:h}),c.a.createElement(te,{setNoteType:o,setNoteInputType:w,setNoteData:v})):c.a.createElement(Ce,null),P&&c.a.createElement("div",null,!!P.length&&c.a.createElement(Ue,{notes:P,user:e.user,removeNote:B,saveRoomChanges:A,togglePinned:function(t){e.user.pinnedNotes.find((function(e){return t._id===e}))?e.user.pinnedNotes.splice(t._id,1):e.user.pinnedNotes.push(t._id);var n=e.room.notes.findIndex((function(e){return t._id===e._id}));e.room.notes.splice(n,1,t),e.saveRoom(e.room),e.updateUser(e.user)},setNoteType:o})))})),Ze="user";function et(){return(et=Object(m.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=b.load(Ze)){e.next=3;break}return e.abrupt("return",null);case 3:return e.next=5,j("user/".concat(t._id));case 5:return t=e.sent,e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tt(){return(tt=Object(m.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j("user/".concat(t));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nt(){return(nt=Object(m.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={userName:t.userName,fullName:t.fullName,password:t.password,pinnedNotes:[],notifications:[]},Object(O.a)(n,"pinnedNotes",[]),Object(O.a)(n,"imgUrl",t.imgUrl?t.imgUrl:I.a),Object(O.a)(n,"joinedAt",Date.now()),Object(O.a)(n,"friends",[]),a=n,e.next=3,k("auth/signup",a);case 3:return a=e.sent,b.save(Ze,a),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function at(){return(at=Object(m.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k("auth/login",t);case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return",null);case 5:return b.save(Ze,n),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rt(){return(rt=Object(m.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return localStorage.removeItem(Ze),e.next=3,k("auth/logout");case 3:return t=e.sent,e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ct(){return(ct=Object(m.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("user/".concat(t._id),t);case 2:return n=e.sent,b.save(Ze,n),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ot(){return(ot=Object(m.a)(l.a.mark((function e(t,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("user/".concat(t,"/update"),{userId:t,imgUrl:n});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var it={getById:function(e){return tt.apply(this,arguments)},signUp:function(e){return nt.apply(this,arguments)},update:function(e){return ct.apply(this,arguments)},login:function(e){return at.apply(this,arguments)},logout:function(){return rt.apply(this,arguments)},getMinimalUser:function(e,t){return{_id:e,imgUrl:t}},updateImgAtContacts:function(e,t){return ot.apply(this,arguments)},getLoggedinUser:function(){return et.apply(this,arguments)}};function st(){return function(){var e=Object(m.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,it.logout();case 2:t({type:"SET_USER",user:null});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}function ut(){return function(){var e=Object(m.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,it.getLoggedinUser();case 2:n=e.sent,t({type:"GET_USER",user:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}function lt(e){return console.log("@@@user in actions@@@",e),function(){var t=Object(m.a)(l.a.mark((function t(n){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,it.update(e);case 2:a=t.sent,n({type:"SET_USER",user:a});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}var mt=[{_id:"aa56640269f443a5d64b32ca",fullName:"Eyal Golan",userName:"Eyalush",friends:[]},{_id:"ba56640269f443a5d64b32cb",fullName:"Omer Adam",userName:"Omerush",friends:[]},{_id:"ca56640269f443a5d64b32cc",fullName:"Zohar Argov",userName:"Ha Melech",friends:[]}];var pt={query:function(e){var t=new URLSearchParams;if(e){for(var n in e)e[n]&&t.set(n,e[n]);return j("user?".concat(t))}},getContactById:function(e){return new Promise((function(t,n){var a=mt.find((function(t){return t._id===e}));a?t(a):n("Contact id ".concat(e," not found!"))}))},deleteContact:function(e){return new Promise((function(t,n){var a=mt.findIndex((function(t){return t._id===e}));-1!==a&&mt.splice(a,1),b.save("contacts",mt),t(mt)}))},saveContact:function(e){return e._id?function(e){return new Promise((function(t,n){var a=mt.findIndex((function(t){return e._id===t._id}));-1!==a&&(mt[a]=e),b.save("contacts",mt),t(e)}))}(e):function(e){return new Promise((function(t,n){e._id=T.makeId(),mt.push(e),b.save("contacts",mt),t(e)}))}(e)},getEmptyContact:function(){return{fullName:"",userName:""}}};function dt(e){return function(){var t=Object(m.a)(l.a.mark((function t(n){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,pt.query(e);case 3:a=t.sent,n({type:"SET_CONTACTS",contacts:a}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("ERROR",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}var ft=function(e){var t=e.imgUrl,n=e.isLoading;return c.a.createElement("div",{className:"avatar-edit"},c.a.createElement("label",null,c.a.createElement("input",{type:"file",onChange:function(t){return e.onUploadImg(t)},hidden:!0}),n?c.a.createElement(Ce,null):c.a.createElement("img",{src:t||I.a,alt:"",className:"avatar avatar-m"})))},ht=n(118),vt=n.n(ht),gt=n(119),Et=n.n(gt),bt=function(e){var t=e.contact,n=e.onAddFriend,a=e.loggedinUser,o=e.moveToRoom,i=Object(r.useState)(!1),s=Object(R.a)(i,2),u=s[0],l=s[1],m=Object(r.useState)(!1),p=Object(R.a)(m,2),d=p[0],f=p[1],h=Object(r.useState)(""),v=Object(R.a)(h,2),g=v[0],E=v[1];Object(r.useEffect)((function(){if(a){var e=a.friends.find((function(e){return e._id===t._id}));e?(f(!0),E(e.roomId)):f(!1)}}),[a,t._id]);var b=function(e){e.preventDefault(),l(!0)};return c.a.createElement("div",{className:"contact-preview",onClick:function(e){d&&o(e,g)}},c.a.createElement("img",{src:t.imgUrl,alt:"".concat(t.userName),className:"avatar avatar-s"}),c.a.createElement("div",{className:"user-name-container"},c.a.createElement("span",null,"Full Name: ",t.fullName),c.a.createElement("span",null,"User Name: ",t.userName)),!t.roomId&&c.a.createElement("img",{src:u||d?Et.a:vt.a,alt:"",className:"add-friend-img",onClick:function(e){return d||u?b(e):function(e){n(t._id),b(e)}(e)}}))},Ot=function(e){var t=e.onAddFriend,n=e.loggedinUser,a=e.onMoveToRoom;return c.a.createElement("div",{className:"contact-list"},e.contacts.map((function(e){return c.a.createElement(bt,{contact:e,onAddFriend:t,loggedinUser:n,key:e._id,moveToRoom:a})})))},wt=function(e){Object(Re.a)(n,e);var t=Object(Te.a)(n);function n(){var e;Object(_e.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={filterBy:{term:""},isLoading:!1},e.loadContacts=Object(m.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.loadContacts(e.state.filterBy);case 2:case"end":return t.stop()}}),t)}))),e.onUploadImg=function(){var t=Object(m.a)(l.a.mark((function t(n){var a,r,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.user,e.setState({isLoading:!0}),t.next=4,z.uploadImg(n);case 4:r=t.sent,c=Object.assign(a,{imgUrl:r.secure_url}),e.props.updateUser(c),it.updateImgAtContacts(a._id,r.secure_url),e.setState({isLoading:!1});case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onAddFriend=function(t){var n=e.props.user,a=n.userName,r=n.fullName,c=n._id,o={userName:a,fullName:r,type:"NotificationFriend",imgUrl:n.imgUrl};E.emit("Add Friend",{notification:o,userId:c,friendId:t})},e.onFilterHandler=function(t){e.setState((function(e){return{filterBy:Object(Se.a)(Object(Se.a)({},e.filterBy),t)}}),e.loadContacts)},e.onMoveToRoom=function(t,n){console.log(t),t.stopPropagation(),e.props.history.push("/board/".concat(n))},e.capitalize=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},e}return Object(Ie.a)(n,[{key:"componentDidMount",value:function(){this.props.getUser(),this.props.user||this.props.history.push("/signup"),this.loadContacts()}},{key:"render",value:function(){var e=this.props,t=e.user,n=e.contacts,a=this.state.isLoading;return c.a.createElement("div",null,t&&c.a.createElement("div",{className:"home-page"},t.userName&&c.a.createElement("h2",null,"Hi There ",this.capitalize(t.userName)),c.a.createElement(ft,{imgUrl:t.imgUrl,onUploadImg:this.onUploadImg,isLoading:a}),c.a.createElement("h6",null,"Let's add contacts veze"),c.a.createElement(ze,{filterBy:this.state.filterBy,onFilter:this.onFilterHandler}),n&&c.a.createElement(Ot,{onMoveToRoom:this.onMoveToRoom,contacts:n,onAddFriend:this.onAddFriend,loggedinUser:t})))}}]),n}(r.Component),yt={getUser:ut,updateUser:lt,loadContacts:dt},Nt=Object(s.b)((function(e){return{user:e.user.loggedinUser,contacts:e.contact.contacts}}),yt)(wt),jt=function(e){var t=e.notification,n=e.onApprove,a=e.onDecline;return c.a.createElement("div",{className:"notification-friend"},c.a.createElement("p",null,t.fullName," wants to start a board with you"),c.a.createElement("button",{onClick:function(){return n(t)}},"Approve"),c.a.createElement("button",{onClick:function(){return a(t)}},"Decline"))},kt=function(e){var t=e.notification;return c.a.createElement("div",{className:"notification-response"},c.a.createElement("p",null,t.fullName," has ",t.isApproved?"Approved":"Declined"," your request"))},xt=n(14),Ct=function(e){var t=e.notification,n=e.onDeleteNotification,a=t.userName,r=t.roomId;return c.a.createElement(xt.a,{to:"/board/".concat(r)},c.a.createElement("div",{className:"notification-note",onClick:n},c.a.createElement("p",null,a," just Added A note! go check it out")))},Ut=function(e){var t=e.notification,n=e.onApprove,a=e.onDecline,r=e.onDeleteNotification,o={NotificationFriend:jt,NotificationResponse:kt,NotificationNote:Ct}[t.type];return c.a.createElement("div",{className:"notification-preview"},c.a.createElement("div",{className:"notification-header"},c.a.createElement("img",{src:t.imgUrl,className:"avatar avatar-xs",alt:"User Avatar"}),c.a.createElement("div",null,c.a.createElement(o,{notification:t,onApprove:n,onDecline:a,onDeleteNotification:r}),c.a.createElement(ae.a,{fromNow:!0},t.createdAt)),c.a.createElement("img",{src:Ke.a,onClick:function(){return r(t)},className:"x-mark",alt:"Close"})))},St=function(e){var t=e.notifications,n=e.onApprove,a=e.onDecline,r=e.onDeleteNotification;return c.a.createElement("div",{className:"notification-list"},t.map((function(e){return c.a.createElement(Ut,{notification:e,key:e._id,onApprove:n,onDecline:a,onDeleteNotification:r})})))},_t={updateUser:lt},It=Object(s.b)((function(e){return{user:e.user.loggedinUser,room:e.room.currRoom}}),_t)((function(e){var t=e.user,n=function(n){var a=t.notifications.findIndex((function(e){return e._id===n._id}));t.notifications.splice(a,1),e.updateUser(t)};return t?c.a.createElement("div",null,t&&c.a.createElement("div",null,!!t.notifications.length&&c.a.createElement(St,{notifications:t.notifications,onApprove:function(e){n(e),E.emit("approve",{notification:e,user:t})},onDecline:function(e){n(e),E.emit("decline",{notification:e,user:t})},onDeleteNotification:n}))):c.a.createElement("h1",null,"Inbox is empty")})),Rt=function(e){Object(Re.a)(n,e);var t=Object(Te.a)(n);function n(){var e;Object(_e.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={filterBy:{term:"",roomId:""}},e.onMoveToRoom=function(t,n){console.log(t),t.stopPropagation(),e.props.history.push("/board/".concat(n))},e.loadContacts=Object(m.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.loadContacts(e.state.filterBy);case 2:case"end":return t.stop()}}),t)}))),e.onFilterHandler=function(t){e.setState((function(e){return{filterBy:Object(Se.a)(Object(Se.a)({},e.filterBy),t)}}),e.loadContacts)},e.handleKeyPress=function(){if(1===e.props.contacts.length){var t=e.props.contacts[0]._id;e.props.history.push("/board/".concat(t))}},e}return Object(Ie.a)(n,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.contacts,n=e.user;return c.a.createElement("div",null,n&&c.a.createElement("div",null,c.a.createElement(ze,{filterBy:this.state.filterBy,onFilter:this.onFilterHandler,moveToContact:this.handleKeyPress}),!!t&&c.a.createElement(Ot,{onMoveToRoom:this.onMoveToRoom,loggedinUser:n,contacts:n.friends})))}}]),n}(r.Component),Tt={loadContacts:dt},Dt=Object(s.b)((function(e){return{contacts:e.contact.contacts,user:e.user.loggedinUser}}),Tt)(Rt),zt=n(53),At=n(124),Mt=n.n(At),Lt=function(e){Object(Re.a)(n,e);var t=Object(Te.a)(n);function n(){var e;Object(_e.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={newUser:{userName:"",fullName:"",password:"",imgUrl:""},isSignUp:!1,isLoading:!1},e.getLoggedinUser=Object(m.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.getUser();case 2:e.props.user&&e.props.history.push("/");case 3:case"end":return t.stop()}}),t)}))),e.onChangeHandler=function(t){var n=t.target,a=n.value,r=n.name;e.setState({newUser:Object(Se.a)(Object(Se.a)({},e.state.newUser),{},Object(O.a)({},r,a))})},e.resetInput=function(){e.setState({newUser:{userName:"",fullName:"",password:"",imgUrl:""}})},e.onUploadImg=function(){var t=Object(m.a)(l.a.mark((function t(n){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({isLoading:!0}),t.next=3,z.uploadImg(n);case 3:a=t.sent,e.setState({newUser:Object(Se.a)(Object(Se.a)({},e.state.newUser),{},{imgUrl:a.secure_url})}),e.setState({isLoading:!1});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.toggleSignUp=function(){e.setState((function(e){return{isSignUp:!e.isSignUp}}))},e.onHandleSubmit=function(){var t=Object(m.a)(l.a.mark((function t(n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),!e.state.isSignUp){t.next=6;break}return t.next=4,e.props.signUp(Object(Se.a)({},e.state.newUser));case 4:t.next=8;break;case 6:return t.next=8,e.props.login(Object(Se.a)({},e.state.newUser));case 8:return t.next=10,e.getLoggedinUser();case 10:if(e.props.user){t.next=15;break}return Mt.a.fire({title:"Wrong password or Username.",width:300,confirmButtonText:"Say what?",confirmButtonColor:"yellow",padding:"1em",background:"#fff url(https://sweetalert2.github.io/images/trees.png)",backdrop:'\n          rgba(0,0,123,0.4)\n          url("https://sweetalert2.github.io/images/nyan-cat.gif")\n          left top\n          no-repeat\n        '}),e.props.history.push("/signup"),e.resetInput(),t.abrupt("return");case 15:e.connectSockets(e.props.user._id),e.props.history.push("/");case 17:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(Ie.a)(n,[{key:"componentDidMount",value:function(){console.log("hi from signUp",this.state.newUser),this.getLoggedinUser()}},{key:"connectSockets",value:function(e){this.props.onConnectSocket(e)}},{key:"render",value:function(){var e=this.state,t=e.isSignUp,n=e.isLoading,a=this.state.newUser.imgUrl;return c.a.createElement("div",{className:"signup-form"},c.a.createElement("form",{onSubmit:this.onHandleSubmit},!t&&c.a.createElement("h1",null,"Login"),t&&c.a.createElement("h1",null,"SignUp"),t&&c.a.createElement(ft,{onUploadImg:this.onUploadImg,imgUrl:a,isLoading:n}),t&&c.a.createElement(zt.d,{label:"Full Name",name:"fullName",value:this.state.newUser.fullName||"",onChange:this.onChangeHandler}),c.a.createElement(zt.d,{label:"UserName",type:"text",name:"userName",value:this.state.newUser.userName||"",onChange:this.onChangeHandler}),c.a.createElement(zt.d,{label:"Password",type:"password",name:"password",value:this.state.newUser.password||"",onChange:this.onChangeHandler}),c.a.createElement("button",null,t?"SignUp":"Login"),!t&&c.a.createElement("h2",{onClick:this.toggleSignUp},"Don't Have an account? Sign Up!"),t&&c.a.createElement("h2",{onClick:this.toggleSignUp},"Head Back to Login")))}}]),n}(r.Component),Bt={signUp:function(e){return function(){var t=Object(m.a)(l.a.mark((function t(n){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,it.signUp(e);case 2:a=t.sent,n({type:"SET_USER",newUser:a});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},getUser:ut,login:function(e){return function(){var t=Object(m.a)(l.a.mark((function t(n){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,it.login(e);case 2:a=t.sent,n({type:"SET_USER",user:a});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},Pt=Object(s.b)((function(e){return{user:e.user.loggedinUser}}),Bt)(Lt),Ht=function(e){Object(Re.a)(n,e);var t=Object(Te.a)(n);function n(){return Object(_e.a)(this,n),t.apply(this,arguments)}return Object(Ie.a)(n,[{key:"componentDidMount",value:function(){var e=Object(m.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.getUser();case 2:this.isInSignupPage||this.props.user||this.props.history.push("/signup");case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(m.a)(l.a.mark((function e(t,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.props.location===t.location||this.props.user||this.isInSignupPage||this.props.history.push("/signup");case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return this.isInSignupPage||this.props.user?c.a.createElement("div",{className:"router-page"},c.a.createElement("main",null,c.a.createElement(d.c,null,c.a.createElement(d.a,{path:"/signup",exact:!0,render:function(t){return c.a.createElement(Pt,Object.assign({},t,{onConnectSocket:e.props.onConnectSocket}))}}),c.a.createElement(d.a,{path:"/",exact:!0,component:Nt}),c.a.createElement(d.a,{path:"/contact",component:Dt}),c.a.createElement(d.a,{path:"/board/:id",component:Qe}),c.a.createElement(d.a,{path:"/inbox/:id",exact:!0,component:It})))):c.a.createElement(Ce,null)}},{key:"isInSignupPage",get:function(){return"/signup"===this.props.location.pathname}}]),n}(c.a.Component),Ft={getUser:ut},Vt=Object(s.b)((function(e){return{user:e.user.loggedinUser}}),Ft)(Object(d.f)(Ht)),$t=n(125),Wt=n.n($t),Kt=n(126),Jt=function(e){Object(Re.a)(n,e);var t=Object(Te.a)(n);function n(){var e;Object(_e.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={menuOpen:!1,chuckJoke:""},e.closeMenu=function(){var t=Object(m.a)(l.a.mark((function t(n){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n&&e.handleLogout(),e.setState({menuOpen:!1}),t.next=4,T.getRandomChuck();case 4:a=t.sent,e.setState({chuckJoke:a});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleLogout=function(){e.props.logout()},e}return Object(Ie.a)(n,[{key:"componentDidMount",value:function(){var e=Object(m.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.getRandomChuck();case 2:t=e.sent,this.setState({chuckJoke:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUpdate",value:function(){var e=Object(m.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.props.isClicked&&!this.state.menuOpen&&this.setState({menuOpen:!0});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleStateChange",value:function(){var e=Object(m.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({menuOpen:t.isOpen});case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,n=t.menuOpen,a=t.chuckJoke,r=this.props.user;return r?c.a.createElement(Kt.stack,{right:!0,isOpen:n,onStateChange:function(t){return e.handleStateChange(t)}},c.a.createElement(xt.b,{activeClassName:"active",exact:!0,to:"/",onClick:function(){return e.closeMenu()}},"Home"),c.a.createElement(xt.b,{activeClassName:"active",to:"/contact",exact:!0,onClick:function(){return e.closeMenu()}},"Contacts"),r.notifications.length&&c.a.createElement("span",{className:"notification-count"},r.notifications.length),c.a.createElement(xt.b,{activeClassName:"active",to:"/inbox/".concat(r._id),exact:!0,onClick:function(){return e.closeMenu()}},"Inbox"),c.a.createElement(xt.b,{activeClassName:"active",to:"/signup",exact:!0,onClick:function(){return e.closeMenu(st)}},"Logout"),c.a.createElement("div",{className:"menu-footer"},c.a.createElement("h5",null,a))):""}}]),n}(c.a.Component),qt={getUser:ut,logout:st},Gt=Object(s.b)((function(e){return{user:e.user.loggedinUser}}),qt)(Object(d.f)(Jt)),Xt=function(e){var t=e.user,n=Object(r.useState)(!1),a=Object(R.a)(n,2),o=a[0],i=a[1];return Object(r.useEffect)((function(){return function(){i(!1)}}),[o]),c.a.createElement("nav",{className:"NavBar"},c.a.createElement(xt.a,{to:"/",className:"home-link"},c.a.createElement("img",{src:Wt.a,alt:"logo",className:"logo"})),t&&!!t.notifications.length&&c.a.createElement("span",{className:"notification-count nav-count",onClick:function(){i(!0)}},t.notifications.length),c.a.createElement(Gt,{isClicked:o}))},Yt=Object(p.a)(),Qt={updateUser:lt,saveRoom:B,loadRoomById:L,getUser:ut},Zt=Object(s.b)((function(e){return{user:e.user.loggedinUser,contacts:e.contact.contacts,room:e.room.currRoom}}),Qt)((function(e){var t=e.user,n=e.room,a=function(a){E.setup(),n&&t&&E.on("updateRoom ".concat(n._id),function(){var n=Object(m.a)(l.a.mark((function n(a){var r,c;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=a.updatedRoom,c=a.userId,console.log("&&&&&UPDATE ROOM INVOKED"),c!==t._id&&(console.log("&&&&&after condition updatedRoom._id"),e.loadRoomById({roomId:r._id}));case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()),t&&(E.on("updateUser ".concat(t._id),(function(e){console.log("TEST",e);var n=b.load("user");console.log("Storage:",n.userName),t._id===n._id&&o(e)})),E.on("updateUserWithoutAudio ".concat(t._id),(function(t){e.updateUser(t)})))},o=function(t){var n=new Audio(h.a);t?(e.updateUser(t),n.play()):console.log("ERROR IN UPDATE USER")};return Object(r.useEffect)((function(){return a(),t&&console.log("connect user sockets",t._id),n&&console.log("connect room sockets",n._id),function(){t&&(console.log("disconnecet user sockets",t._id),n&&console.log("disconnecet room sockets",n._id),n&&E.off("updateRoom ".concat(n._id)),E.off("updateUser ".concat(t._id)),E.off("updateUserWithoutAudio ".concat(t._id)),E.terminate())}}),[t,n]),c.a.createElement("div",{className:"App"},c.a.createElement(d.b,{history:Yt},c.a.createElement(Xt,{user:e.user}),c.a.createElement(Vt,{onConnectSocket:a})))})),en=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function tn(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var nn=n(36),an=n(127),rn={loggedinUser:null};var cn={contacts:[],currContact:null};var on={rooms:[],currRoom:null};var sn=Object(nn.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER":return console.log(t.user),t.user?Object(Se.a)(Object(Se.a)({},e),{},{loggedinUser:Object(Se.a)({},t.user)}):Object(Se.a)(Object(Se.a)({},e),{},{loggedinUser:t.user});case"GET_USER":return Object(Se.a)(Object(Se.a)({},e),{},{loggedinUser:t.user});default:return e}},contact:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:cn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CONTACTS":return Object(Se.a)(Object(Se.a)({},e),{},{contacts:t.contacts});case"SET_CURR_CONTACT":return Object(Se.a)(Object(Se.a)({},e),{},{currContact:t.contact});case"UPDATE_CONTACT":return Object(Se.a)(Object(Se.a)({},e),{},{contacts:e.contacts.map((function(e){return e._id===t.contact._id?t.contact:e}))});case"DELETE_CONTACT":return Object(Se.a)(Object(Se.a)({},e),{},{contacts:e.contacts.filter((function(e){return e._id!==t.id}))});case"ADD_CONTACT":return Object(Se.a)(Object(Se.a)({},e),{},{contacts:[].concat(Object($e.a)(e.contacts),[t.contact])});default:return e}},room:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:on,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ROOMS":return Object(Se.a)(Object(Se.a)({},e),{},{rooms:t.rooms});case"SET_CURR_ROOM":return Object(Se.a)(Object(Se.a)({},e),{},{currRoom:t.room});case"UPDATE_ROOM":return console.log("UPDATE_ROOM invoked rooms:",e.rooms),Object(Se.a)(Object(Se.a)({},e),{},{rooms:e.rooms.map((function(e){return e._id===t.room._id?(console.log("id match!"),t.room):e}))});case"DELETE_ROOM":return Object(Se.a)(Object(Se.a)({},e),{},{rooms:e.rooms.filter((function(e){return e._id!==t.id}))});case"ADD_ROOM":return console.log("UPDATE_ROOM ",t.room),Object(Se.a)(Object(Se.a)({},e),{},{rooms:[].concat(Object($e.a)(e.rooms),[t.room])});default:return e}}}),un=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||nn.d,ln=Object(nn.e)(sn,un(Object(nn.a)(an.a)));i.a.render(c.a.createElement(s.a,{store:ln},c.a.createElement(c.a.StrictMode,null,c.a.createElement(Zt,null))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");en?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):tn(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):tn(t,e)}))}}()},39:function(e,t,n){e.exports=n.p+"static/media/plus.867418af.svg"},48:function(e,t,n){e.exports=n.p+"static/media/user.c79dce59.png"},52:function(e,t,n){e.exports=n.p+"static/media/x-mark.002e9675.svg"}},[[129,1,2]]]);
//# sourceMappingURL=main.f4d47e18.chunk.js.map