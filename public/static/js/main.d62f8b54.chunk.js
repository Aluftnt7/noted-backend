(this.webpackJsonpnoted=this.webpackJsonpnoted||[]).push([[0],{199:function(e,t,n){e.exports=n.p+"static/media/sp-tune.a3eeb710.mp3"},201:function(e,t,n){e.exports=n.p+"static/media/loading.ecf90307.svg"},202:function(e,t,n){e.exports=n.p+"static/media/friends.e8f88cde.svg"},203:function(e,t,n){e.exports=n.p+"static/media/ok.251fc800.svg"},215:function(e,t,n){e.exports=n.p+"static/media/edit.70454fa7.svg"},216:function(e,t,n){e.exports=n.p+"static/media/cross.21df9a01.svg"},217:function(e,t,n){e.exports=n.p+"static/media/arrow.15b12873.svg"},218:function(e,t,n){e.exports=n.p+"static/media/empty-star.d1d08460.svg"},219:function(e,t,n){e.exports=n.p+"static/media/star.7dc6e5d5.svg"},220:function(e,t,n){e.exports=n.p+"static/media/paint.7eefbfe1.svg"},221:function(e,t,n){e.exports=n.p+"static/media/splash-orange.9f89683d.svg"},222:function(e,t,n){e.exports=n.p+"static/media/splash-pink.5dca2b20.svg"},223:function(e,t,n){e.exports=n.p+"static/media/splash-yellow.5bd94ad1.svg"},224:function(e,t,n){e.exports=n.p+"static/media/splash-blue.edf66db8.svg"},225:function(e,t,n){e.exports=n.p+"static/media/splash-green.d3c3573a.svg"},226:function(e,t,n){e.exports=n.p+"static/media/upload.926d5c39.svg"},232:function(e,t,n){e.exports=n.p+"static/media/petek-logo.e7a6391d.png"},237:function(e,t,n){e.exports=n(369)},246:function(e,t,n){},251:function(e,t,n){},280:function(e,t){},299:function(e,t){},369:function(e,t,n){"use strict";n.r(t);var a,r=n(1),o=n.n(r),c=n(30),i=n.n(c),s=n(13),u=(n(246),n(247),n(248),n(249),n(3)),l=n.n(u),p=n(5),d=(n(251),n(19)),m=n(10),f=n(199),v=n.n(f),h=n(200),g=n.n(h),b={setup:function(){a=g()("/")},terminate:function(){a=null},on:function(e,t){a.on(e,t)},off:function(e,t){a.off(e,t)},emit:function(e,t){a.emit(e,t)}};var E=n(31);var O={save:function(e,t){var n=JSON.stringify(t);localStorage.setItem(e,n)},load:function(e){var t=localStorage.getItem(e);return JSON.parse(t)}},y=n(53),N=n.n(y),j=N.a.create({withCredentials:!0}),w=function(e,t){return U(e,"GET",t)},k=function(e,t){return U(e,"POST",t)},x=function(e,t){return U(e,"PUT",t)},C=function(e,t){return U(e,"DELETE",t)};function U(e){return S.apply(this,arguments)}function S(){return(S=Object(p.a)(l.a.mark((function e(t){var n,a,r,o=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:"get",a=o.length>2&&void 0!==o[2]?o[2]:null,e.prev=2,e.next=5,j({method:n,url:"".concat("/api/").concat(t),data:a});case 5:return r=e.sent,e.abrupt("return",r.data);case 9:if(e.prev=9,e.t0=e.catch(2),401!==e.t0.response.status){e.next=13;break}return e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}var R=n(88),_=n.n(R),T="user";function I(){return(I=Object(p.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=O.load(T)){e.next=3;break}return e.abrupt("return",null);case 3:return e.next=5,w("user/".concat(t._id));case 5:return t=e.sent,e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(){return(D=Object(p.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={userName:t.userName,fullName:t.fullName,password:t.password,pinnedNotes:[],notifications:[]},Object(E.a)(n,"pinnedNotes",[]),Object(E.a)(n,"imgUrl",t.imgUrl?t.imgUrl:_.a),Object(E.a)(n,"joinedAt",Date.now()),Object(E.a)(n,"friends",[]),a=n,e.next=3,k("auth/signup",a);case 3:return a=e.sent,O.save(T,a),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(){return(A=Object(p.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k("auth/login",t);case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return");case 5:return O.save(T,n),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(){return(P=Object(p.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return localStorage.removeItem(T),e.next=3,k("auth/logout");case 3:return t=e.sent,e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(){return(M=Object(p.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("user/".concat(t._id),t);case 2:return n=e.sent,O.save(T,n),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(){return(B=Object(p.a)(l.a.mark((function e(t,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{_id:t,imgUrl:n});case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var H={getById:function(){return I.apply(this,arguments)},signUp:function(e){return D.apply(this,arguments)},update:function(e){return M.apply(this,arguments)},login:function(e){return A.apply(this,arguments)},logout:function(){return P.apply(this,arguments)},getMinimalUser:function(e,t){return B.apply(this,arguments)}};function L(){return function(){var e=Object(p.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H.logout();case 2:t({type:"SET_USER",user:null});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}function F(){return function(){var e=Object(p.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H.getById();case 2:n=e.sent,t({type:"GET_USER",user:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}function z(e){return console.log("user in actions",e),function(){var t=Object(p.a)(l.a.mark((function t(n){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,H.update(e);case 2:a=t.sent,n({type:"SET_USER",user:a});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function V(){return(V=Object(p.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._id?x("room/".concat(t._id),t):k("room",t),e.next=3,n;case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var W={query:function(e){var t=new URLSearchParams(e);return w("room?".concat(t))},getById:function(e){var t=new URLSearchParams;if(e){for(var n in e)e[n]&&t.set(n,e[n]);return w("room?".concat(t))}},save:function(e){return V.apply(this,arguments)},remove:function(e){return C("room/".concat(e))}};function J(e){return console.log("filterBy in actions",e),function(){var t=Object(p.a)(l.a.mark((function t(n){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,W.getById(e);case 3:a=t.sent,n({type:"SET_CURR_ROOM",room:a}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("ERROR",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}function K(e){return console.log(e.notes),function(){var t=Object(p.a)(l.a.mark((function t(n){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=!!e._id,t.next=3,W.save(e);case 3:return e=t.sent,n(a?{type:"SET_CURR_ROOM",room:e}:{type:"ADD_ROOM",room:e}),t.abrupt("return",e);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}var q=n(26),G=n(27),Q=n(29),Y=n(28),Z=n(6),X=n(235),$={makeId:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12,t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=0;a<e;a++)t+=n.charAt(Math.floor(Math.random()*n.length));return t},getRandomChuck:function(){return ee.apply(this,arguments)}};function ee(){return(ee=Object(p.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("https://api.chucknorris.io/jokes/random");case 2:return t=e.sent,e.abrupt("return",t.data.value);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var te=[{_id:"aa56640269f443a5d64b32ca",fullName:"Eyal Golan",userName:"Eyalush",friends:[]},{_id:"ba56640269f443a5d64b32cb",fullName:"Omer Adam",userName:"Omerush",friends:[]},{_id:"ca56640269f443a5d64b32cc",fullName:"Zohar Argov",userName:"Ha Melech",friends:[]}];var ne={query:function(e){var t=new URLSearchParams;if(e){for(var n in e)e[n]&&t.set(n,e[n]);return w("user?".concat(t))}},getContactById:function(e){return new Promise((function(t,n){var a=te.find((function(t){return t._id===e}));a?t(a):n("Contact id ".concat(e," not found!"))}))},deleteContact:function(e){return new Promise((function(t,n){var a=te.findIndex((function(t){return t._id===e}));-1!==a&&te.splice(a,1),O.save("contacts",te),t(te)}))},saveContact:function(e){return e._id?function(e){return new Promise((function(t,n){var a=te.findIndex((function(t){return e._id===t._id}));-1!==a&&(te[a]=e),O.save("contacts",te),t(e)}))}(e):function(e){return new Promise((function(t,n){e._id=$.makeId(),te.push(e),O.save("contacts",te),t(e)}))}(e)},getEmptyContact:function(){return{fullName:"",userName:""}}};function ae(e){return function(){var t=Object(p.a)(l.a.mark((function t(n){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ne.query(e);case 3:a=t.sent,n({type:"SET_CONTACTS",contacts:a}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("ERROR",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}n(299);var re=n(201),oe=n.n(re),ce=function(){return o.a.createElement("div",null,o.a.createElement("img",{src:oe.a,alt:"loading",className:"loading"}))},ie=function(e){var t=e.imgUrl,n=e.isLoading;return o.a.createElement("div",{className:"avatar-edit"},o.a.createElement("label",null,o.a.createElement("input",{type:"file",onChange:function(t){return e.onUploadImg(t)},hidden:!0}),n?o.a.createElement(ce,null):o.a.createElement("img",{src:t||_.a,alt:"",className:"avatar avatar-m"})))},se=n(7),ue=n(202),le=n.n(ue),pe=n(203),de=n.n(pe),me=function(e){var t=e.contact,n=e.onAddFriend,a=e.loggedinUser,c=e.moveToRoom,i=Object(r.useState)(!1),s=Object(se.a)(i,2),u=s[0],l=s[1],p=Object(r.useState)(!1),d=Object(se.a)(p,2),m=d[0],f=d[1],v=Object(r.useState)(""),h=Object(se.a)(v,2),g=h[0],b=h[1];Object(r.useEffect)((function(){if(a){var e=a.friends.find((function(e){return e._id===t._id}));e?(f(!0),b(e.roomId)):f(!1)}}),[a,t._id]);var E=function(e){e.preventDefault(),l(!0)};return o.a.createElement("div",{className:"contact-preview",onClick:function(e){m&&c(e,g)}},o.a.createElement("img",{src:t.imgUrl,alt:"".concat(t.userName),className:"avatar avatar-s"}),o.a.createElement("div",{className:"user-name-container"},o.a.createElement("span",null,"Full Name: ",t.fullName),o.a.createElement("span",null,"User Name: ",t.userName)),!t.roomId&&o.a.createElement("img",{src:u||m?de.a:le.a,alt:"",className:"add-friend-img",onClick:function(e){return m||u?E(e):function(e){n(e,t._id),E(e)}(e)}}))},fe=function(e){var t=e.onAddFriend,n=e.loggedinUser,a=e.onMoveToRoom;return o.a.createElement("div",{className:"contact-list"},e.contacts.map((function(e){return o.a.createElement(me,{contact:e,onAddFriend:t,loggedinUser:n,key:e._id,moveToRoom:a})})))},ve=n(90),he=function(e){Object(Q.a)(n,e);var t=Object(Y.a)(n);function n(e){var a;return Object(q.a)(this,n),(a=t.call(this,e)).state={term:""},a.onChangeHandler=function(e){var t=e.target,n=t.value,r=t.name;a.setState(Object(E.a)({},r,n),(function(){a.props.onFilter(Object(Z.a)({},a.state))}))},a.onKeyHandler=function(e){13===e.keyCode&&(e.preventDefault(),a.props.moveToContact())},a.state=Object(Z.a)({},e.filterBy),a}return Object(G.a)(n,[{key:"render",value:function(){var e=this.props.placeHolder;return o.a.createElement("form",null,o.a.createElement(ve.DebounceInput,{minLength:0,className:"filter-input",debounceTimeout:300,type:"text",placeholder:e||"Search Contacts",onChange:this.onChangeHandler,name:"term",value:this.state.term,onKeyDown:this.onKeyHandler}))}}]),n}(r.Component);var ge={uploadImg:function(e){var t="https://api.cloudinary.com/v1_1/".concat("tamir","/image/upload"),n=new FormData;return e.target?n.append("file",e.target.files[0]):n.append("file",e),n.append("upload_preset","u1inrfbp"),fetch(t,{method:"POST",body:n,secure:!0}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){return console.error(e)}))}},be=function(e){Object(Q.a)(n,e);var t=Object(Y.a)(n);function n(){var e;Object(q.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={filterBy:{term:""},isLoading:!1},e.loadContacts=Object(p.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.loadContacts(e.state.filterBy);case 2:case"end":return t.stop()}}),t)}))),e.onUploadImg=function(){var t=Object(p.a)(l.a.mark((function t(n){var a,r,o;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.user,e.setState({isLoading:!0}),t.next=4,ge.uploadImg(n);case 4:r=t.sent,o=Object.assign(a,{imgUrl:r.secure_url}),e.props.updateUser(o),e.setState({isLoading:!1});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onAddFriend=function(t,n){t.preventDefault();var a=e.props.user;b.emit("Add Friend",{friendId:n,_id:a._id,userName:a.userName,fullName:a.fullName,type:"NotificationFriend",imgUrl:a.imgUrl})},e.onFilterHandler=function(t){e.setState((function(e){return{filterBy:Object(Z.a)(Object(Z.a)({},e.filterBy),t)}}),e.loadContacts)},e.onMoveToRoom=function(t,n){console.log(t),t.stopPropagation(),e.props.history.push("/board/".concat(n))},e.capitalize=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},e}return Object(G.a)(n,[{key:"componentDidMount",value:function(){this.props.user||this.props.history.push("/signup"),this.loadContacts()}},{key:"render",value:function(){var e=this.props,t=e.user,n=e.contacts,a=this.state.isLoading;return o.a.createElement("div",null,t&&o.a.createElement("div",{className:"home-page"},t.userName&&o.a.createElement("h2",null,"Hi There ",this.capitalize(t.userName)),o.a.createElement(ie,{imgUrl:t.imgUrl,onUploadImg:this.onUploadImg,isLoading:a}),o.a.createElement("h6",null,"Let's add contacts veze"),o.a.createElement(he,{filterBy:this.state.filterBy,onFilter:this.onFilterHandler}),n&&o.a.createElement(fe,{onMoveToRoom:this.onMoveToRoom,contacts:n,onAddFriend:this.onAddFriend,loggedinUser:t})),o.a.createElement("h1",null,"REACT-AVATAR LIB:"),o.a.createElement(X.a,{size:"150",round:"75px",name:this.props.user.userName,src:this.props.user.imgUrl}))}}]),n}(r.Component),Ee={getUser:F,updateUser:z,loadContacts:ae},Oe=Object(s.b)((function(e){return{user:e.user.loggedinUser,contacts:e.contact.contacts}}),Ee)(be),ye=function(e){var t=e.notification,n=e.onApprove,a=e.onDecline;return o.a.createElement("div",{className:"notification-friend"},o.a.createElement("p",null,t.fullName," wants to start a board with you"),o.a.createElement("button",{onClick:function(){return n(t)}},"Approve"),o.a.createElement("button",{onClick:function(){return a(t)}},"Decline"))},Ne=function(e){var t=e.notification;return o.a.createElement("div",{className:"notification-response"},o.a.createElement("p",null,t.fullName," has ",t.isApproved?"Approved":"Declined"," your request"))},je=n(18),we=function(e){var t=e.notification,n=e.onDeleteNotification,a=t.userName,r=t.roomId;return o.a.createElement(je.a,{to:"/board/".concat(r)},o.a.createElement("div",{className:"notification-note",onClick:n},o.a.createElement("p",null,a," just Added A note! go check it out")))},ke=n(91),xe=n.n(ke),Ce=n(54),Ue=n.n(Ce),Se=function(e){var t=e.notification,n=e.onApprove,a=e.onDecline,r=e.onDeleteNotification,c={NotificationFriend:ye,NotificationResponse:Ne,NotificationNote:we}[t.type];return o.a.createElement("div",{className:"notification-preview"},o.a.createElement("div",{className:"notification-header"},o.a.createElement("img",{src:t.imgUrl,className:"avatar avatar-xs",alt:"User Avatar"}),o.a.createElement("div",null,o.a.createElement(c,{notification:t,onApprove:n,onDecline:a,onDeleteNotification:r}),o.a.createElement(xe.a,{fromNow:!0},t.createdAt)),o.a.createElement("img",{src:Ue.a,onClick:function(){return r(t)},className:"x-mark",alt:"Close"})))},Re=function(e){var t=e.notifications,n=e.onApprove,a=e.onDecline,r=e.onDeleteNotification;return o.a.createElement("div",{className:"notification-list"},t.map((function(e){return o.a.createElement(Se,{notification:e,key:e._id,onApprove:n,onDecline:a,onDeleteNotification:r})})))},_e={updateUser:z},Te=Object(s.b)((function(e){return{user:e.user.loggedinUser,room:e.room.currRoom}}),_e)((function(e){var t=e.user,n=function(n){var a=t.notifications.findIndex((function(e){return e._id===n._id}));t.notifications.splice(a,1),e.updateUser(t)};return t?o.a.createElement("div",null,t&&o.a.createElement("div",null,!!t.notifications.length&&o.a.createElement(Re,{notifications:t.notifications,onApprove:function(e){n(e),b.emit("approve",{notification:e,user:t})},onDecline:function(e){n(e),b.emit("decline",{notification:e,user:t})},onDeleteNotification:n}))):o.a.createElement("h1",null,"Inbox is empty")})),Ie=function(e){Object(Q.a)(n,e);var t=Object(Y.a)(n);function n(){var e;Object(q.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={filterBy:{term:"",roomId:""}},e.onMoveToRoom=function(t,n){console.log(t),t.stopPropagation(),e.props.history.push("/board/".concat(n))},e.loadContacts=Object(p.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.loadContacts(e.state.filterBy);case 2:case"end":return t.stop()}}),t)}))),e.onFilterHandler=function(t){e.setState((function(e){return{filterBy:Object(Z.a)(Object(Z.a)({},e.filterBy),t)}}),e.loadContacts)},e.handleKeyPress=function(){if(1===e.props.contacts.length){var t=e.props.contacts[0]._id;e.props.history.push("/board/".concat(t))}},e}return Object(G.a)(n,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.contacts,n=e.user;return o.a.createElement("div",null,n&&o.a.createElement("div",null,o.a.createElement(he,{filterBy:this.state.filterBy,onFilter:this.onFilterHandler,moveToContact:this.handleKeyPress}),!!t&&o.a.createElement(fe,{onMoveToRoom:this.onMoveToRoom,loggedinUser:n,contacts:n.friends})))}}]),n}(r.Component),De={loadContacts:ae},Ae=Object(s.b)((function(e){return{contacts:e.contact.contacts,user:e.user.loggedinUser}}),De)(Ie),Pe=n(49),Me=n(209),Be=n.n(Me),He=n(210),Le=n.n(He),Fe=n(211),ze=n.n(Fe),Ve=n(212),We=n.n(Ve),Je=n(213),Ke=n.n(Je),qe=n(214),Ge=n.n(qe),Qe=function(e){var t=e.setNoteType,n=e.setNoteInputType,a=e.setNoteData,c=Object(r.useState)(!1),i=Object(se.a)(c,2),s=i[0],u=i[1];return o.a.createElement(Pe.b,{slideSpeed:500,direction:"up",spacing:8,isOpen:s,className:"button-menu"},o.a.createElement(Pe.c,{iconResting:o.a.createElement(Be.a,{style:{fontSize:20},nativecolor:"white"}),iconActive:o.a.createElement(Le.a,{style:{fontSize:20},nativecolor:"white"}),backgroundColor:"black",onClick:function(){return u(!s)},size:56}),o.a.createElement(Pe.a,{icon:o.a.createElement(ze.a,{style:{fontSize:20,fill:"#51a255"},nativecolor:"black"}),backgroundColor:"white",size:40,className:!s&&"hidden",onClick:function(){t("NoteText"),u(!s),n("InputText")}}),o.a.createElement(Pe.a,{icon:o.a.createElement(We.a,{style:{fontSize:20,fill:"#28b5f2"},nativecolor:"black"}),backgroundColor:"white",size:40,className:!s&&"hidden",onClick:function(){t("NoteImg"),u(!s),n("InputImg")}}),o.a.createElement(Pe.a,{icon:o.a.createElement(Ke.a,{style:{fontSize:20,fill:"#ff0000"},nativecolor:"black"}),backgroundColor:"white",size:40,className:!s&&"hidden",onClick:function(){t("NoteVideo"),u(!s),n("InputVideo")}}),o.a.createElement(Pe.a,{icon:o.a.createElement(Ge.a,{style:{fontSize:20,fill:"#ffa350"},nativecolor:"black"}),backgroundColor:"white",size:40,className:!s&&"hidden",onClick:function(){t("NoteTodo"),u(!s),n("InputTodo"),a([])}}))},Ye=n(215),Ze=n.n(Ye),Xe=n(92),$e=n.n(Xe),et=function(e){var t=e.note;return o.a.createElement("div",{className:"note-text"},t.header&&o.a.createElement("h4",null,t.header),o.a.createElement("p",null,t.data))},tt=function(e){var t=e.note;return o.a.createElement("div",{className:"note-img"},t.header&&o.a.createElement("h4",null,t.header),o.a.createElement("img",{src:t.data,alt:t.data}))},nt=function(e){var t=e.note;return o.a.createElement("div",{className:"note-video"},t.header&&o.a.createElement("h4",null,t.header),o.a.createElement("iframe",{width:"100%",allow:"fullscreen",src:"https://www.youtube.com/embed/"+t.data,title:"Video Player"}))},at=n(55),rt=n.n(at),ot=n(216),ct=n.n(ot),it=n(217),st=n.n(it),ut={saveRoom:K},lt=Object(s.b)((function(e){return{room:e.room.currRoom}}),ut)((function(e){var t=e.note,n=e.saveRoom,a=e.room,c=e.userId,i=e.isEdit,s=e.currTodoIdx,u=e.setCurrTodoIdx,d=e.setIsNewTodo,m=e.isNewTodo,f=Object(r.useState)(""),v=Object(se.a)(f,2),h=v[0],g=v[1],E=Object(r.useState)(""),O=Object(se.a)(E,2),y=O[0],N=O[1],j=Object(r.createRef)(),w=Object(r.createRef)(),k=function(){var e=Object(p.a)(l.a.mark((function e(r){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i){e.next=2;break}return e.abrupt("return");case 2:return t.data[r].isDone=!t.data[r].isDone,e.next=5,n(a);case 5:b.emit("roomUpdated",{room:a,userId:c});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){j.current&&j.current.focus(),""!==s&&j.current&&(t.data[s].text=h)}),[h,s]),o.a.createElement("div",{className:"note-todo"},o.a.createElement("div",{className:"todo-header"},t.header&&o.a.createElement("h4",null,t.header),i&&o.a.createElement("img",{src:rt.a,className:"new-todo-btn",onClick:function(){d(!0)}})),o.a.createElement("ul",null,!!t.data.length&&t.data.map((function(e,n){return o.a.createElement("li",{key:e.text,onClick:function(){i&&(u(n),g(e.text))}},s!==n&&o.a.createElement("span",{className:e.isDone?"done":"",onClick:function(e){return k(n)}},e.text),i&&o.a.createElement("img",{src:ct.a,className:"remove-todo-btn",onClick:function(){return function(e){t.data.splice(e,1)}(n)}}),i&&s===n&&o.a.createElement("input",{type:"text",value:h,ref:j,onChange:function(e){g(e.target.value)}}))}))),m&&o.a.createElement("div",null,o.a.createElement("input",{type:"text",placeholder:"New Todo",ref:w,onChange:function(e){return N(e.target.value)}}),o.a.createElement("img",{src:st.a,className:"add-todo-btn",onClick:function(){return function(){var e={text:y,isDone:!1};t.data.push(e),d(!1),N(""),w.current.value=""}()}})))})),pt=n(218),dt=n.n(pt),mt=n(219),ft=n.n(mt),vt=n(220),ht=n.n(vt),gt=n(221),bt=n.n(gt),Et=n(222),Ot=n.n(Et),yt=n(223),Nt=n.n(yt),jt=n(224),wt=n.n(jt),kt=n(225),xt=n.n(kt),Ct=function(e){var t=e.togglePinned,n=e.note,a=e.user,c=e.setNoteColor,i=Object(r.useState)(!1),s=Object(se.a)(i,2),u=s[0],l=s[1];return Object(r.useEffect)((function(){}),[n]),o.a.createElement("div",{className:"features-container"},o.a.createElement("img",{className:"pin-btn",src:a.pinnedNotes.find((function(e){return e===n._id}))?ft.a:dt.a,alt:"Pin Note",onClick:function(){return t(n)}}),o.a.createElement("div",{className:"color-pallete"},o.a.createElement("img",{src:ht.a,alt:"Change Color",className:"color-pallete-icon",onClick:function(){return l(!u)}}),u&&o.a.createElement("div",{className:"colors-container"},o.a.createElement("img",{src:bt.a,className:"color1",onClick:function(){c("#ffa350"),l(!1)}}),o.a.createElement("img",{src:Ot.a,className:"color2",onClick:function(){c("#f78888"),l(!1)}}),o.a.createElement("img",{src:Nt.a,className:"color3",onClick:function(){c("#f3d250"),l(!1)}}),o.a.createElement("img",{src:wt.a,className:"color4",onClick:function(){c("#90ccf4"),l(!1)}}),o.a.createElement("img",{src:xt.a,className:"color5",onClick:function(){c("#4caf50"),l(!1)}}))))},Ut=function(e){var t=e.note,n=e.user,a=e.removeNote,c=e.saveRoomChanges,i=e.togglePinned,s=e.isPinned,u=Object(r.useState)(!1),l=Object(se.a)(u,2),p=l[0],d=l[1],m=Object(r.useState)(!1),f=Object(se.a)(m,2),v=f[0],h=f[1],g=Object(r.useState)(""),b=Object(se.a)(g,2),E=b[0],O=b[1],y={NoteText:et,NoteImg:tt,NoteVideo:nt,NoteTodo:lt}[t.type],N=Object(r.createRef)(),j=function(){t.bgColor&&(N.current.style.backgroundColor=t.bgColor)};return Object(r.useEffect)((function(){j(),t.createdBy._id===n._id&&t.createdBy.imgUrl!==n.imgUrl&&(t.createdBy.imgUrl=n.imgUrl,c())}),[]),Object(r.useEffect)((function(){j()}),[t.bgColor]),o.a.createElement("div",{className:"note-preview"},o.a.createElement("div",{className:n._id===t.createdBy._id?"user-container":"friend-container"},o.a.createElement("img",{src:t.createdBy.imgUrl,alt:"Note creator avatar",className:"avatar avatar-s"}),o.a.createElement("div",{className:"note-container",ref:N},o.a.createElement("div",{className:"note-header"},o.a.createElement("div",null,("NoteTodo"===t.type||"NoteText"===t.type)&&!p&&o.a.createElement("img",{src:Ze.a,alt:"Edit note",className:"edit-btn",onClick:function(){return d(!0)}}),("NoteTodo"===t.type||"NoteText"===t.type)&&p&&o.a.createElement("img",{src:$e.a,alt:"Save changes",className:"save-btn",onClick:function(){d(!1),c(),O("")}}),o.a.createElement("img",{src:Ue.a,className:"remove-btn",onClick:function(){return a(t._id)},alt:"Delete"})),o.a.createElement(xe.a,{format:"MM/DD/YY ,HH:mm"},t.createdAt)),o.a.createElement(y,{note:t,user:n,isEdit:p,currTodoIdx:E,setCurrTodoIdx:O,setIsNewTodo:h,isNewTodo:v}),o.a.createElement(Ct,{togglePinned:i,isPinned:s,note:t,user:n,setNoteColor:function(e){t.bgColor=e,c()}}))))},St=function(e){var t=e.notes,n=e.user,a=e.removeNote,c=e.saveRoomChanges,i=e.togglePinned,s=e.isPinned,u=e.setNoteType,l=Object(r.useState)([]),p=Object(se.a)(l,2),d=p[0],m=p[1];return Object(r.useEffect)((function(){var e=[];t.map((function(t){n.pinnedNotes.find((function(e){return e===t._id}))?e.unshift(t):e.push(t)})),m(e)}),[t]),o.a.createElement("div",{className:"note-list",onClick:function(){return u("")}},d.length?d.map((function(e){return o.a.createElement(Ut,{note:e,key:e._id,user:n,removeNote:a,saveRoomChanges:c,togglePinned:i,isPinned:s})})):o.a.createElement(ce,null))},Rt=function(e){var t=e.setNoteData,n=e.setNoteHeader,a=e.handleSubmit;return o.a.createElement("form",{className:"input-text",onSubmit:a},o.a.createElement("input",{className:"input-header",placeholder:"Note Header",type:"text",onChange:function(e){return n(e.target.value)}}),o.a.createElement("input",{className:"input-data",placeholder:"Say Something",type:"text",onChange:function(e){return t(e.target.value)}}),o.a.createElement("button",{hidden:!0},"Save"))},_t=n(226),Tt=n.n(_t),It=function(e){var t=e.setNoteHeader,n=e.onUploadImg,a=Object(r.createRef)();return o.a.createElement("section",{className:"input-img"},o.a.createElement("input",{className:"input-header",placeholder:"Img Header",type:"text",onChange:function(e){return t(e.target.value)}}),o.a.createElement("input",{type:"file",onChange:function(e){n(e)},ref:a,hidden:!0}),o.a.createElement("img",{src:Tt.a,className:"add-button",alt:"Plus Icon",onClick:function(){a.current.click()}}))},Dt="AIzaSyDD1nIJuc1thshvoaRykKhVDjI8-kbDSFM",At={youtubeQuery:function(e){return Pt.apply(this,arguments)}};function Pt(){return(Pt=Object(p.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.a.get("https://www.googleapis.com/youtube/v3/search?part=snippet&videoEmbeddable=true&type=video&key=".concat(Dt,"&q=").concat(t,"&maxResults=").concat(15));case 3:return n=e.sent,e.abrupt("return",n.data.items);case 7:e.prev=7,e.t0=e.catch(0),console.log("Error while fetching videos",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}var Mt=function(e){var t=e.addVideo,n=e.setNoteHeader,a=Object(r.useState)([]),c=Object(se.a)(a,2),i=c[0],s=c[1],u=function(){var e=Object(p.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=3;break}return s([]),e.abrupt("return");case 3:return e.next=5,At.youtubeQuery(t);case 5:n=e.sent,s(n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return o.a.createElement("section",{className:"input-video"},o.a.createElement("input",{className:"input-header",placeholder:"Note Header",type:"text",onChange:function(e){return n(e.target.value)}}),o.a.createElement(ve.DebounceInput,{className:"search-input",minLength:0,debounceTimeout:500,type:"text",placeholder:"Search Video",onChange:function(e){return u(e.target.value)}}),!!i.length&&o.a.createElement("h1",null,"Add video!"),!!i.length&&i.map((function(e){return o.a.createElement("div",{className:"video-card",key:e.id.videoId},o.a.createElement("img",{src:e.snippet.thumbnails.default.url,alt:"Video Thumbnail"}),o.a.createElement("h6",null,e.snippet.title),o.a.createElement("img",{src:rt.a,className:"add-button",alt:"Plus Icon",onClick:function(){t(e.id.videoId),s([])}}))})))},Bt=n(57),Ht=function(e){var t=e.setNoteHeader,n=e.setNoteData,a=e.handleSubmit,c=e.noteData,i=Object(r.useState)(""),s=Object(se.a)(i,2),u=s[0],l=s[1],p=o.a.useRef();return o.a.createElement("div",{className:"input-todo"},o.a.createElement("input",{type:"text",placeholder:"Header?",className:"input-header",onChange:function(e){return t(e.target.value)}}),o.a.createElement("ul",null,!c.length&&o.a.createElement("h5",null,"No Todo's Added"),!!c.length&&c.map((function(e,t){return o.a.createElement("li",{className:"todo",key:e.text},o.a.createElement("span",null,e.text),o.a.createElement("img",{src:Ue.a,onClick:function(){return e=t,void n(c.filter((function(t,n){return e!==n})));var e},className:"x-mark",alt:"Remove Todo"}))}))),o.a.createElement("div",{className:"add-todo-container"},o.a.createElement("input",{type:"text",placeholder:"task?",className:"input-task",ref:p,onChange:function(e){return l(e.target.value)}}),o.a.createElement("img",{src:rt.a,className:"add-button",onClick:function(){return n([].concat(Object(Bt.a)(c),[{text:u,isDone:!1}])),l(""),void(p.current.value="")},alt:"Add todo"})),o.a.createElement("img",{src:$e.a,className:"add-button",onClick:a,alt:"Save"}))},Lt={loadRoomById:J,saveRoom:K,resetCurrRoom:function(){return console.log("made it"),function(){var e=Object(p.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{null,t({type:"SET_CURR_ROOM",room:null})}catch(n){console.log("ERROR:",n)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},updateUser:z},Ft=Object(s.b)((function(e){return{room:e.room.currRoom,user:e.user.loggedinUser}}),Lt)((function(e){var t=Object(r.useState)(""),n=Object(se.a)(t,2),a=n[0],c=n[1],i=Object(r.useState)(""),s=Object(se.a)(i,2),u=s[0],d=s[1],m=Object(r.useState)(""),f=Object(se.a)(m,2),v=f[0],h=f[1],g=Object(r.useState)("InputText"),E=Object(se.a)(g,2),O=E[0],y=E[1],N=Object(r.useState)(!1),j=Object(se.a)(N,2),w=j[0],k=j[1],x=Object(r.useState)(!1),C=Object(se.a)(x,2),U=C[0],S=(C[1],Object(r.useState)("")),R=Object(se.a)(S,2),_=R[0],T=R[1],I={header:u,data:v,type:a},D={InputText:Rt,InputImg:It,InputVideo:Mt,InputTodo:Ht}[O],A=function(){var t=Object(p.a)(l.a.mark((function t(){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.match.params.id,t.next=3,e.loadRoomById({term:_.term,roomId:n});case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),P=function(){var t=Object(p.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.saveRoom(e.room);case 2:b.emit("roomUpdated",{room:e.room,userId:e.user._id});case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),M=function(){var e=Object(p.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("NoteImg"!==a){e.next=6;break}return e.next=3,ge.uploadImg(t);case 3:n=e.sent,h(n.secure_url),k(!0);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(){var t=Object(p.a)(l.a.mark((function t(n){var a,r,o;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.user,n&&n.preventDefault(),I._id=$.makeId(24),I.createdAt=Date.now(),t.next=6,H.getMinimalUser(a._id,a.imgUrl);case 6:r=t.sent,I.createdBy=r,o=a.friends.find((function(t){return t.roomId===e.match.params.id})),e.room.notes.unshift(I),e.saveRoom(e.room),b.emit("added note",{room:e.room,user:e.user,friendId:o._id}),d(""),h(""),c(""),k(!1);case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),L=function(){var t=Object(p.a)(l.a.mark((function t(n){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.room.notes.findIndex((function(e){return e._id===n})),e.room.notes.splice(a,1),t.next=4,e.saveRoom(e.room);case 4:b.emit("roomUpdated",{room:e.room,userId:e.user._id});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();if(Object(r.useEffect)((function(){return A(),function(){e.resetCurrRoom()}}),[]),Object(r.useEffect)((function(){(v&&"NoteImg"===a||"NoteVideo"===a)&&B()}),[w]),Object(r.useEffect)((function(){A()}),[_]),e.room)var F=e.room.notes;return o.a.createElement("div",{className:"board-page"},F?o.a.createElement("div",{className:"note-add"},o.a.createElement(he,{filterBy:_,onFilter:function(e){T(e)},placeHolder:"Search for notes"}),a&&o.a.createElement(D,{addVideo:function(e){h(e),k(!0)},onUploadImg:M,handleSubmit:B,setNoteHeader:d,setNoteData:h,noteData:v}),o.a.createElement(Qe,{setNoteType:c,setNoteInputType:y,setNoteData:h})):o.a.createElement(ce,null),F&&o.a.createElement("div",null,!!F.length&&o.a.createElement(St,{notes:F,user:e.user,removeNote:L,saveRoomChanges:P,togglePinned:function(t){e.user.pinnedNotes.find((function(e){return t._id===e}))?e.user.pinnedNotes.splice(t._id,1):e.user.pinnedNotes.push(t._id);var n=e.room.notes.findIndex((function(e){return t._id===e._id}));e.room.notes.splice(n,1,t),e.saveRoom(e.room),e.updateUser(e.user)},setNoteType:c,isPinned:U})))})),zt=n(93),Vt=n(231),Wt=n.n(Vt),Jt=function(e){Object(Q.a)(n,e);var t=Object(Y.a)(n);function n(){var e;Object(q.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={newUser:{userName:"",fullName:"",password:"",imgUrl:""},isSignUp:!1,isLoading:!1},e.getLoggedinUser=Object(p.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.getUser();case 2:e.props.user&&e.props.history.push("/");case 3:case"end":return t.stop()}}),t)}))),e.onChangeHandler=function(t){var n=t.target,a=n.value,r=n.name;e.setState({newUser:Object(Z.a)(Object(Z.a)({},e.state.newUser),{},Object(E.a)({},r,a))})},e.resetInput=function(){e.setState({newUser:{userName:"",password:""}})},e.onUploadImg=function(){var t=Object(p.a)(l.a.mark((function t(n){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({isLoading:!0}),t.next=3,ge.uploadImg(n);case 3:a=t.sent,e.setState({newUser:Object(Z.a)(Object(Z.a)({},e.state.newUser),{},{imgUrl:a.secure_url})}),e.setState({isLoading:!1});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.toggleSignUp=function(){e.setState((function(e){return{isSignUp:!e.isSignUp}}))},e.onHandleSubmit=function(){var t=Object(p.a)(l.a.mark((function t(n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),!e.state.isSignUp){t.next=6;break}return t.next=4,e.props.signUp(Object(Z.a)({},e.state.newUser));case 4:t.next=8;break;case 6:return t.next=8,e.props.login(Object(Z.a)({},e.state.newUser));case 8:return t.next=10,e.getLoggedinUser();case 10:if(e.props.user){t.next=15;break}return Wt.a.fire({title:"Wrong password or Username.",width:300,confirmButtonText:"Say what?",confirmButtonColor:"yellow",padding:"1em",background:"#fff url(https://sweetalert2.github.io/images/trees.png)",backdrop:'\n          rgba(0,0,123,0.4)\n          url("https://sweetalert2.github.io/images/nyan-cat.gif")\n          left top\n          no-repeat\n        '}),e.props.history.push("/signup"),e.resetInput(),t.abrupt("return");case 15:e.connectSockets(e.props.user._id),e.props.history.push("/");case 17:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(G.a)(n,[{key:"componentDidMount",value:function(){this.getLoggedinUser()}},{key:"connectSockets",value:function(e){this.props.onConnectSocket(e)}},{key:"render",value:function(){var e=this.state,t=e.isSignUp,n=e.isLoading,a=this.state.newUser.imgUrl;return o.a.createElement("div",{className:"signup-form"},o.a.createElement("form",{onSubmit:this.onHandleSubmit},!t&&o.a.createElement("h1",null,"Login"),t&&o.a.createElement("h1",null,"SignUp"),t&&o.a.createElement(ie,{onUploadImg:this.onUploadImg,imgUrl:a,isLoading:n}),t&&o.a.createElement(zt.d,{label:"Full Name",name:"fullName",value:this.state.newUser.fullName||"",onChange:this.onChangeHandler}),o.a.createElement(zt.d,{label:"UserName",type:"text",name:"userName",value:this.state.newUser.userName||"",onChange:this.onChangeHandler}),o.a.createElement(zt.d,{label:"Password",type:"password",name:"password",value:this.state.newUser.password||"",onChange:this.onChangeHandler}),o.a.createElement("button",null,t?"SignUp":"Login"),!t&&o.a.createElement("h2",{onClick:this.toggleSignUp},"Don't Have an account? Sign Up!"),t&&o.a.createElement("h2",{onClick:this.toggleSignUp},"Head Back to Login")))}}]),n}(r.Component),Kt={signUp:function(e){return function(){var t=Object(p.a)(l.a.mark((function t(n){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,H.signUp(e);case 2:a=t.sent,n({type:"SET_USER",newUser:a});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},getUser:F,login:function(e){return function(){var t=Object(p.a)(l.a.mark((function t(n){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,H.login(e);case 2:a=t.sent,n({type:"SET_USER",newUser:a});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},qt=Object(s.b)((function(e){return{user:e.user.loggedinUser}}),Kt)(Jt),Gt=function(e){Object(Q.a)(n,e);var t=Object(Y.a)(n);function n(){return Object(q.a)(this,n),t.apply(this,arguments)}return Object(G.a)(n,[{key:"componentDidMount",value:function(){var e=Object(p.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("hi"),e.next=3,this.props.getUser();case 3:this.isInSignupPage||this.props.user||this.props.history.push("/signup");case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(p.a)(l.a.mark((function e(t,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.props.location===t.location||this.props.user||this.isInSignupPage||this.props.history.push("/signup");case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return this.isInSignupPage||this.props.user?o.a.createElement("div",{className:"router-page"},o.a.createElement("main",null,o.a.createElement(m.c,null,o.a.createElement(m.a,{path:"/signup",exact:!0,render:function(t){return o.a.createElement(qt,Object.assign({},t,{onConnectSocket:e.props.onConnectSocket}))}}),o.a.createElement(m.a,{path:"/",exact:!0,component:Oe}),o.a.createElement(m.a,{path:"/contact",component:Ae}),o.a.createElement(m.a,{path:"/board/:id",component:Ft}),o.a.createElement(m.a,{path:"/inbox/:id",exact:!0,component:Te})))):o.a.createElement(ce,null)}},{key:"isInSignupPage",get:function(){return"/signup"===this.props.location.pathname}}]),n}(o.a.Component),Qt={getUser:F},Yt=Object(s.b)((function(e){return{user:e.user.loggedinUser}}),Qt)(Object(m.f)(Gt)),Zt=n(232),Xt=n.n(Zt),$t=n(233),en=function(e){Object(Q.a)(n,e);var t=Object(Y.a)(n);function n(){var e;Object(q.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={menuOpen:!1,chuckJoke:""},e.closeMenu=function(){var t=Object(p.a)(l.a.mark((function t(n){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n&&e.handleLogout(),e.setState({menuOpen:!1}),t.next=4,$.getRandomChuck();case 4:a=t.sent,e.setState({chuckJoke:a});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleLogout=Object(p.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.logout();case 2:return t.next=4,e.props.getUser();case 4:console.log(e.props.user),e.props.history.push("/signup");case 6:case"end":return t.stop()}}),t)}))),e}return Object(G.a)(n,[{key:"componentDidMount",value:function(){var e=Object(p.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.getRandomChuck();case 2:t=e.sent,this.setState({chuckJoke:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleStateChange",value:function(){var e=Object(p.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({menuOpen:t.isOpen}),this.props.onOpenMenu(t.isOpen);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,n=t.menuOpen,a=t.chuckJoke,r=this.props.user;return r?o.a.createElement($t.stack,{right:!0,isOpen:n,onStateChange:function(t){return e.handleStateChange(t)}},o.a.createElement(je.b,{activeClassName:"active",exact:!0,to:"/",onClick:function(){return e.closeMenu()}},"Home"),o.a.createElement(je.b,{activeClassName:"active",to:"/contact",exact:!0,onClick:function(){return e.closeMenu()}},"Contacts"),r.notifications.length&&o.a.createElement("span",{className:"notification-count"},r.notifications.length),o.a.createElement(je.b,{activeClassName:"active",to:"/inbox/".concat(r._id),exact:!0,onClick:function(){return e.closeMenu()}},"Inbox"),o.a.createElement(je.b,{activeClassName:"active",to:"/signup",exact:!0,onClick:function(){return e.closeMenu(L)}},"Logout"),o.a.createElement("div",{className:"menu-footer"},o.a.createElement("h5",null,a))):""}}]),n}(o.a.Component),tn={getUser:F,logout:L},nn=Object(s.b)((function(e){return{user:e.user.loggedinUser}}),tn)(Object(m.f)(en)),an=function(e){var t=e.user,n=Object(r.useState)(!1),a=Object(se.a)(n,2),c=(a[0],a[1]);return o.a.createElement("nav",{className:"NavBar"},o.a.createElement(je.a,{to:"/",className:"home-link"},o.a.createElement("img",{src:Xt.a,alt:"logo",className:"logo"})),t&&!!t.notifications.length&&o.a.createElement("span",{className:"notification-count nav-count"},t.notifications.length),o.a.createElement(nn,{onOpenMenu:function(e){e?c(e):setTimeout((function(){c(e)}),450)}}))},rn=Object(d.a)(),on={getUser:F,updateUser:z,saveRoom:K,loadRoomById:J},cn=Object(s.b)((function(e){return{user:e.user.loggedinUser,contacts:e.contact.contacts,room:e.room.currRoom}}),on)((function(e){var t=e.user,n=e.room,a=function(a){b.setup(),n&&t&&b.on("updateRoom ".concat(n._id),function(){var n=Object(p.a)(l.a.mark((function n(a){var r,o;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=a.updatedRoom,o=a.userId,console.log("here?"),o!==t._id&&(console.log("updated that shit",r),e.loadRoomById({roomId:r._id}));case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()),t&&(b.on("updateUser ".concat(t._id),(function(e){console.log(e),c(e)})),b.on("updateUserWithoutAudio ".concat(t._id),(function(t){var n=t.user;e.updateUser(n)})))},c=function(t){var n=new Audio(v.a);t?(e.updateUser(t),n.play()):console.log("ERROR IN UPDATE USER")};return Object(r.useEffect)((function(){return a(),t&&console.log("connect sockets",t._id),function(){t&&(console.log("disconnecet sockets",t._id),n&&b.off("updateRoom ".concat(n._id)),b.off("updateUser ".concat(t._id)),b.off("updateUserWithoutAudio ".concat(t._id)))}}),[t]),o.a.createElement("div",{className:"App"},o.a.createElement(m.b,{history:rn},o.a.createElement(an,{user:e.user}),o.a.createElement(Yt,{onConnectSocket:a}),o.a.createElement("button",{onClick:function(){console.log(e)}},"PTEST")))})),sn=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function un(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var ln=n(48),pn=n(234),dn={loggedinUser:null};var mn={contacts:[],currContact:null};var fn={rooms:[],currRoom:null};var vn=ln.d,hn=Object(ln.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER":case"GET_USER":return Object(Z.a)(Object(Z.a)({},e),{},{loggedinUser:t.user});default:return e}},contact:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CONTACTS":return Object(Z.a)(Object(Z.a)({},e),{},{contacts:t.contacts});case"SET_CURR_CONTACT":return Object(Z.a)(Object(Z.a)({},e),{},{currContact:t.contact});case"UPDATE_CONTACT":return Object(Z.a)(Object(Z.a)({},e),{},{contacts:e.contacts.map((function(e){return e._id===t.contact._id?t.contact:e}))});case"DELETE_CONTACT":return Object(Z.a)(Object(Z.a)({},e),{},{contacts:e.contacts.filter((function(e){return e._id!==t.id}))});case"ADD_CONTACT":return Object(Z.a)(Object(Z.a)({},e),{},{contacts:[].concat(Object(Bt.a)(e.contacts),[t.contact])});default:return e}},room:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ROOMS":return Object(Z.a)(Object(Z.a)({},e),{},{rooms:t.rooms});case"SET_CURR_ROOM":return Object(Z.a)(Object(Z.a)({},e),{},{currRoom:t.room});case"UPDATE_ROOM":return console.log("UPDATE_ROOM invoked rooms:",e.rooms),Object(Z.a)(Object(Z.a)({},e),{},{rooms:e.rooms.map((function(e){return e._id===t.room._id?(console.log("id match!"),t.room):e}))});case"DELETE_ROOM":return Object(Z.a)(Object(Z.a)({},e),{},{rooms:e.rooms.filter((function(e){return e._id!==t.id}))});case"ADD_ROOM":return console.log("UPDATE_ROOM ",t.room),Object(Z.a)(Object(Z.a)({},e),{},{rooms:[].concat(Object(Bt.a)(e.rooms),[t.room])});default:return e}}}),gn=Object(ln.e)(hn,vn(Object(ln.a)(pn.a)));i.a.render(o.a.createElement(s.a,{store:gn},o.a.createElement(o.a.StrictMode,null,o.a.createElement(cn,null))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");sn?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):un(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):un(t,e)}))}}()},54:function(e,t,n){e.exports=n.p+"static/media/x-mark.082519b9.svg"},55:function(e,t,n){e.exports=n.p+"static/media/plus.867418af.svg"},88:function(e,t,n){e.exports=n.p+"static/media/user.c79dce59.png"},92:function(e,t,n){e.exports=n.p+"static/media/save.d5a09bc5.svg"}},[[237,1,2]]]);
//# sourceMappingURL=main.d62f8b54.chunk.js.map